"use strict";const{abs:t,acos:e,asin:a,atan:r,atan2:n,ceil:i,cos:s,exp:o,floor:y,log:l,hypot:x,max:c,min:u,pow:h,random:f,round:p,sin:d,sqrt:v,tan:m,PI:w}=Math;function g(t,e){this.w=t,this.h=e,this.size=t*e,this.arraybuffer=new ArrayBuffer(this.size),this.data=new Int8Array(this.arraybuffer)}async function b(t,{minSize:e=1e3,maxSize:a=5e3,filter:r="",scale:n=1,canvas:i=null}={}){let s,o=function(t){return t instanceof HTMLImageElement?"img":t instanceof SVGElement?"svg":t instanceof HTMLCanvasElement?"canvas":t instanceof File?"file":t instanceof ArrayBuffer?"buffer":"string"==typeof t?/^(file:|https?:\/\/|\/|\.\/|\.\.\/)/.test(t)?"url":"string":"unknown"}(t),y={minSize:e,maxSize:a,filter:r,scale:n,canvas:i};if("img"===o){let e=t.src;s=await async function(t="",{minSize:e=1e3,maxSize:a=5e3,filter:r="",scale:n=1,canvas:i=null}={}){let s,o,y,l,x,c,u=1,h=0;e*=n,a*=n,i||(i=new OffscreenCanvas(300,150));let f=i.getContext("2d"),p=await fetch(t);if(p.ok){let r=await p.blob(),{type:n}=r;"image/svg+xml"!==n?(s=await createImageBitmap(r),[o,y]=[s.width,s.height],i.width=o,i.height=y,f.drawImage(s,0,0),l=f.getImageData(0,0,o,y)):(s=new Image,s.src=t,s.crossOrigin="anonymous",await s.decode(),o=s.naturalWidth,y=s.naturalHeight,h=Math.min(o,y),u=h<e||h>a?e/h:1,x=o*u,c=y*u,i.width=x,i.height=c,f=i.getContext("2d"),f.fillStyle="white",f.fillRect(0,0,x,c),f.drawImage(s,0,0,x,c),l=f.getImageData(0,0,x,c))}let{width:d,height:v}=l;return d=Math.ceil(d/u),v=Math.ceil(v/u),{imgData:l,scaleAdjust:u,width:d,height:v}}(e,y)}let{imgData:l,scaleAdjust:x,width:c,height:u}=s,h=function(t){let e,{data:a,width:r,height:n}=t,i=new g(r,n),s=a.length;for(let t=0,r=0;t<s;t+=4,r++)e=a[t],i.data[r]=e<128?1:0;return i}(l);return{bmp:h,scaleAdjust:x,width:c,height:u}}function A(){this.area=0,this.len=0,this.curve={},this.pt=[],this.minX=1e5,this.minY=1e5,this.maxX=-1,this.maxY=-1}function M(t){this.n=t,this.tag=new Array(t),this.c=new Array(3*t),this.alphaCurve=0,this.vertex=new Array(t),this.alpha=new Array(t),this.alpha0=new Array(t),this.beta=new Array(t)}function z(t,e=-1){let a=!("auto"!=e||!t[0].hasOwnProperty("decimals"));for(let r=0,n=t.length;r<n;r++){let n=t[r];(e>-1||a)&&(e=a?n.decimals:e,t[r].values=n.values.map(t=>t?+t.toFixed(e):t))}return t}function S(t,{toShorthands:e=!0,toRelative:a=!0,decimals:r=3}={}){return r>-1&&r<2&&(t=z(t,r)),e&&(t=function(t,e=-1,a=!0){let r;if(a){let e=t.map(t=>t.type).join("");r=/[astvqmhlc]/g.test(e)}t=a&&r?function(t,e=-1){return k(t,!1,e)}(t,e):t;let n={type:"M",values:t[0].values};t[0].decimals&&(n.decimals=t[0].decimals);let i,s=[n],o={x:t[0].values[0],y:t[0].values[1]},y=.01;for(let a=1,r=t.length;a<r;a++){let r=t[a],{type:l,values:x}=r,c=x.slice(-2),u=t[a-1],h=u.type;i={x:c[0],y:c[1]};let f,p,d,v,m={x:x[0],y:x[1]},w=Math.abs(i.x-o.x),g=Math.abs(i.y-o.y),b=(w+g)/2*y;switch(l){case"L":n=0===g||g<b&&w>b?{type:"H",values:[x[0]]}:0===w||g>b&&w<b?{type:"V",values:[x[1]]}:r;break;case"Q":if("Q"!==h){o={x:c[0],y:c[1]},s.push(r);continue}let t={x:u.values[0],y:u.values[1]};v={x:2*o.x-t.x,y:2*o.y-t.y},f=Math.abs(m.x-v.x),p=Math.abs(m.y-v.y),d=(f+p)/2,n=d<b?{type:"T",values:[i.x,i.y]}:r;break;case"C":let e={x:x[2],y:x[3]};if("C"!==h){s.push(r),o={x:c[0],y:c[1]};continue}let a={x:u.values[2],y:u.values[3]};v={x:2*o.x-a.x,y:2*o.y-a.y},f=Math.abs(m.x-v.x),p=Math.abs(m.y-v.y),d=(f+p)/2,n=d<b?{type:"S",values:[e.x,e.y,i.x,i.y]}:r;break;default:n={type:l,values:x}}(r.decimals||0===r.decimals)&&(n.decimals=r.decimals),e>-1&&(n.values=n.values.map(t=>+t.toFixed(e))),o={x:c[0],y:c[1]},s.push(n)}return s}(t)),a&&(t=function(t,e=-1){return k(t,!0,e)}(t)),r>-1&&(t=z(t,r)),t}function k(t,e=!1,a=-1){a>=0&&(t[0].values=t[0].values.map(t=>+t.toFixed(a)));let r=t[0].values,n=r[0],i=r[1],s=n,o=i;for(let r=1,y=t.length;r<y;r++){let y=t[r],{type:l,values:x}=y,c=e?l.toLowerCase():l.toUpperCase();if(l!==c)switch(l=c,y.type=l,l){case"a":case"A":x[5]=e?x[5]-n:x[5]+n,x[6]=e?x[6]-i:x[6]+i;break;case"v":case"V":x[0]=e?x[0]-i:x[0]+i;break;case"h":case"H":x[0]=e?x[0]-n:x[0]+n;break;case"m":case"M":e?(x[0]-=n,x[1]-=i):(x[0]+=n,x[1]+=i),s=e?x[0]+n:x[0],o=e?x[1]+i:x[1];break;default:if(x.length)for(let t=0;t<x.length;t++)x[t]=e?x[t]-(t%2?i:n):x[t]+(t%2?i:n)}let u=x.length;switch(l){case"z":case"Z":n=s,i=o;break;case"h":case"H":n=e?n+x[0]:x[0];break;case"v":case"V":i=e?i+x[0]:x[0];break;case"m":case"M":s=x[u-2]+(e?n:0),o=x[u-1]+(e?i:0);default:n=x[u-2]+(e?n:0),i=x[u-1]+(e?i:0)}a>=0&&(y.values=y.values.map(t=>+t.toFixed(a)))}return t}function j(t,{turnpolicy:e="majority",turdsize:a=1,optcurve:r=!0,alphamax:n=1,opttolerance:i=1}={}){let s=[];return function(){let r,n=t.copy(),i={x:0,y:0};function o(t){let e=n.w*t.y+t.x;for(;e<n.size&&1!==n.data[e];)e++;return e<n.size&&n.index(e)}function y(t,e){for(let a=2;a<5;a++){let r=0;for(let i=1-a;i<=a-1;i++)r+=n.at(t+i,e+a-1)?1:-1,r+=n.at(t+a-1,e+i-1)?1:-1,r+=n.at(t+i-1,e-a)?1:-1,r+=n.at(t-a,e+i)?1:-1;if(r>0)return 1;if(r<0)return 0}return 0}function l(a){let r,i=new A,s=a.x,o=a.y,l=0,x=1;for(i.sign=t.at(a.x,a.y)?"+":"-";i.pt.push({x:s,y:o}),s>i.maxX&&(i.maxX=s),s<i.minX&&(i.minX=s),o>i.maxY&&(i.maxY=o),o<i.minY&&(i.minY=o),i.len++,s+=l,o+=x,i.area-=s*x,s!==a.x||o!==a.y;){let t=n.at(s+(l+x-1)/2,o+(x-l-1)/2),a=n.at(s+(l-x-1)/2,o+(x+l-1)/2);a&&!t?"right"===e||"black"===e&&"+"===i.sign||"white"===e&&"-"===i.sign||"majority"===e&&y(s,o)||"minority"===e&&!y(s,o)?(r=l,l=-x,x=r):(r=l,l=x,x=-r):a?(r=l,l=-x,x=r):t||(r=l,l=x,x=-r)}return i}function x(t){let e,a,r=t.pt[0].y,i=t.len;for(let s=1;s<i;s++){let i=t.pt[s].x,o=t.pt[s].y;if(o!==r){a=r<o?r:o,e=t.maxX;for(let t=i;t<e;t++)n.flip(t,a);r=o}}}for(;i=o(i);)r=l(i),x(r),r.area>a&&s.push(r)}(),function(){function t(){this.data=[0,0,0,0,0,0,0,0,0]}function e(t,e,a,r,n){this.x=t,this.y=e,this.xy=a,this.x2=r,this.y2=n}function a(t,e){return t>=e?t%e:t>=0?t:e-1-(-1-t)%e}function o(t,e){return t.x*e.y-t.y*e.x}function y(t,e,a){return t<=a?t<=e&&e<a:t<=e||e<a}function l(t){return t>0?1:t<0?-1:0}function x(t,e){let a=new Array(3),r=0;a[0]=e.x,a[1]=e.y,a[2]=1;for(let e=0;e<3;e++)for(let n=0;n<3;n++)r+=a[e]*t.at(e,n)*a[n];return r}function c(t,e,a){return{x:e.x+t*(a.x-e.x),y:e.y+t*(a.y-e.y)}}function u(t,e){let a=function(t,e){return{x:-l(e.y-t.y),y:l(e.x-t.x)}}(t,e);return a.y*(e.x-t.x)-a.x*(e.y-t.y)}function h(t="",e={},a={},r={},n={}){let i,s,o,y;return"cprod"===t||"iprod1"===t?(i=a.x-e.x,o=a.y-e.y,s=n.x-r.x,y=n.y-r.y):(i=a.x-e.x,o=a.y-e.y,s=r.x-e.x,y=r.y-e.y),"cprod"===t||"dpara"===t?i*y-s*o:i*s+o*y}function f(t,e){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function p(t,e,a,r,n){let i=1-t;return{x:i*i*i*e.x+i*i*t*3*a.x+t*t*i*3*r.x+t*t*t*n.x,y:i*i*i*e.y+i*i*t*3*a.y+t*t*i*3*r.y+t*t*t*n.y}}function d(t,e,a,r,n,i){let s=h("cprod",t,e,n,i),o=h("cprod",e,a,n,i),y=s-2*o+h("cprod",a,r,n,i),l=-2*s+2*o,x=l*l-4*y*s;if(0===y||x<0)return-1;let c=Math.sqrt(x),u=(-l+c)/(2*y),f=(-l-c)/(2*y);return u>=0&&u<=1?u:f>=0&&f<=1?f:-1}function v(t){t.x0=t.pt[0].x,t.y0=t.pt[0].y,t.sums=[];let a=t.sums;a.push(new e(0,0,0,0,0));for(let r=0;r<t.len;r++){let n=t.pt[r].x-t.x0,i=t.pt[r].y-t.y0;a.push(new e(a[r].x+n,a[r].y+i,a[r].xy+n*i,a[r].x2+n*n,a[r].y2+i*i))}}function m(t){let e,r=t.len,n=t.pt,i=new Array(r),s=new Array(r),x=new Array(4);t.lon=new Array(r);let c,u,h,f,p,d,v,m,w=[{x:0,y:0},{x:0,y:0}],g={x:0,y:0},b={x:0,y:0},A={x:0,y:0},M=0;for(u=r-1;u>=0;u--)n[u].x!=n[M].x&&n[u].y!=n[M].y&&(M=u+1),s[u]=M;for(u=r-1;u>=0;u--){for(x[0]=x[1]=x[2]=x[3]=0,e=(3+3*(n[a(u+1,r)].x-n[u].x)+(n[a(u+1,r)].y-n[u].y))/2,x[e]++,w[0].x=0,w[0].y=0,w[1].x=0,w[1].y=0,M=s[u],f=u;;){if(c=0,e=(3+3*l(n[M].x-n[f].x)+l(n[M].y-n[f].y))/2,x[e]++,x[0]&&x[1]&&x[2]&&x[3]){i[u]=f,c=1;break}if(g.x=n[M].x-n[u].x,g.y=n[M].y-n[u].y,o(w[0],g)<0||o(w[1],g)>0)break;if(Math.abs(g.x)<=1&&Math.abs(g.y)<=1||(b.x=g.x+(g.y>=0&&(g.y>0||g.x<0)?1:-1),b.y=g.y+(g.x<=0&&(g.x<0||g.y<0)?1:-1),o(w[0],b)>=0&&(w[0].x=b.x,w[0].y=b.y),b.x=g.x+(g.y<=0&&(g.y<0||g.x<0)?1:-1),b.y=g.y+(g.x>=0&&(g.x>0||g.y<0)?1:-1),o(w[1],b)<=0&&(w[1].x=b.x,w[1].y=b.y)),f=M,M=s[f],!y(M,u,f))break}0===c&&(A.x=l(n[M].x-n[f].x),A.y=l(n[M].y-n[f].y),g.x=n[f].x-n[u].x,g.y=n[f].y-n[u].y,p=o(w[0],g),d=o(w[0],A),v=o(w[1],g),m=o(w[1],A),h=1e7,d<0&&(h=Math.floor(p/-d)),m>0&&(h=Math.min(h,Math.floor(-v/m))),i[u]=a(f+h,r))}for(h=i[r-1],t.lon[r-1]=h,u=r-2;u>=0;u--)y(u+1,i[u],h)&&(h=i[u]),t.lon[u]=h;for(u=r-1;y(a(u+1,r),h,t.lon[u]);u--)t.lon[u]=h}function w(t){function e(t,e,a){let r,n,i,s,o,y,l,x,c,u,h,f,p,d,v=t.len,m=t.pt,w=t.sums,g=0;return a>=v&&(a-=v,g=1),0===g?(r=w[a+1].x-w[e].x,n=w[a+1].y-w[e].y,s=w[a+1].x2-w[e].x2,i=w[a+1].xy-w[e].xy,o=w[a+1].y2-w[e].y2,y=a+1-e):(r=w[a+1].x-w[e].x+w[v].x,n=w[a+1].y-w[e].y+w[v].y,s=w[a+1].x2-w[e].x2+w[v].x2,i=w[a+1].xy-w[e].xy+w[v].xy,o=w[a+1].y2-w[e].y2+w[v].y2,y=a+1-e+v),h=(m[e].x+m[a].x)/2-m[0].x,f=(m[e].y+m[a].y)/2-m[0].y,d=m[a].x-m[e].x,p=-(m[a].y-m[e].y),l=(s-2*r*h)/y+h*h,x=(i-r*f-n*h)/y+h*f,c=(o-2*n*f)/y+f*f,u=p*p*l+2*p*d*x+d*d*c,Math.sqrt(u)}let r,n,i,s,o,y,l,x=t.len,c=new Array(x+1),u=new Array(x+1),h=new Array(x),f=new Array(x+1),p=new Array(x+1),d=new Array(x+1);for(r=0;r<x;r++)l=a(t.lon[a(r-1,x)]-1,x),l==r&&(l=a(r+1,x)),h[r]=l<r?x:l;for(n=1,r=0;r<x;r++)for(;n<=h[r];)f[n]=r,n++;for(r=0,n=0;r<x;n++)p[n]=r,r=h[r];for(p[n]=x,i=n,r=x,n=i;n>0;n--)d[n]=r,r=f[r];for(d[0]=0,c[0]=0,n=1;n<=i;n++)for(r=d[n];r<=p[n];r++){for(y=-1,s=p[n-1];s>=f[r];s--)o=e(t,s,r)+c[s],(y<0||o<y)&&(u[r]=s,y=o);c[r]=y}for(t.m=i,t.po=new Array(i),r=x,n=i-1;r>0;n--)r=u[r],t.po[n]=r}function g(e){function r(t,e,a,r,n){let i,s,o,y,l,x,c,u,h,f,p,d=t.len,v=t.sums,m=0;for(;a>=d;)a-=d,m+=1;for(;e>=d;)e-=d,m-=1;for(;a<0;)a+=d,m-=1;for(;e<0;)e+=d,m+=1;i=v[a+1].x-v[e].x+m*v[d].x,s=v[a+1].y-v[e].y+m*v[d].y,o=v[a+1].x2-v[e].x2+m*v[d].x2,y=v[a+1].xy-v[e].xy+m*v[d].xy,l=v[a+1].y2-v[e].y2+m*v[d].y2,x=a+1-e+m*d,r.x=i/x,r.y=s/x,c=(o-i*i/x)/x,u=(y-i*s/x)/x,h=(l-s*s/x)/x,f=(c+h+Math.sqrt((c-h)*(c-h)+4*u*u))/2,c-=f,h-=f,Math.abs(c)>=Math.abs(h)?(p=Math.sqrt(c*c+u*u),0!==p&&(n.x=-u/p,n.y=c/p)):(p=Math.sqrt(h*h+u*u),0!==p&&(n.x=-h/p,n.y=u/p)),0===p&&(n.x=n.y=0)}let n,i,s,o,y,l,c,u,h,f,p,d,v,m,w,g=e.m,b=e.po,A=e.len,z=e.pt,S=e.x0,k=e.y0,j=new Array(g),D=new Array(g),q=new Array(g),$=new Array(3),C={x:0,y:0};for(e.curve=new M(g),i=0;i<g;i++)s=b[a(i+1,g)],s=a(s-b[i],A)+b[i],j[i]={x:0,y:0},D[i]={x:0,y:0},r(e,b[i],s,j[i],D[i]);for(i=0;i<g;i++)if(q[i]=new t,n=D[i].x*D[i].x+D[i].y*D[i].y,0===n)for(s=0;s<3;s++)for(o=0;o<3;o++)q[i].data[3*s+o]=0;else for($[0]=D[i].y,$[1]=-D[i].x,$[2]=-$[1]*j[i].y-$[0]*j[i].x,y=0;y<3;y++)for(o=0;o<3;o++)q[i].data[3*y+o]=$[y]*$[o]/n;for(i=0;i<g;i++){for(l=new t,c={x:0,y:0},C.x=z[b[i]].x-S,C.y=z[b[i]].y-k,s=a(i-1,g),y=0;y<3;y++)for(o=0;o<3;o++)l.data[3*y+o]=q[s].at(y,o)+q[i].at(y,o);for(;;){if(f=l.at(0,0)*l.at(1,1)-l.at(0,1)*l.at(1,0),0!==f){c.x=(-l.at(0,2)*l.at(1,1)+l.at(1,2)*l.at(0,1))/f,c.y=(l.at(0,2)*l.at(1,0)-l.at(1,2)*l.at(0,0))/f;break}for(l.at(0,0)>l.at(1,1)?($[0]=-l.at(0,1),$[1]=l.at(0,0)):l.at(1,1)?($[0]=-l.at(1,1),$[1]=l.at(1,0)):($[0]=1,$[1]=0),n=$[0]*$[0]+$[1]*$[1],$[2]=-$[1]*C.y-$[0]*C.x,y=0;y<3;y++)for(o=0;o<3;o++)l.data[3*y+o]+=$[y]*$[o]/n}if(u=Math.abs(c.x-C.x),h=Math.abs(c.y-C.y),u<=.5&&h<=.5)e.curve.vertex[i]={x:c.x+S,y:c.y+k};else{if(p=x(l,C),v=C.x,m=C.y,0!==l.at(0,0))for(w=0;w<2;w++)c.y=C.y-.5+w,c.x=-(l.at(0,1)*c.y+l.at(0,2))/l.at(0,0),u=Math.abs(c.x-C.x),d=x(l,c),u<=.5&&d<p&&(p=d,v=c.x,m=c.y);if(0!==l.at(1,1))for(w=0;w<2;w++)c.x=C.x-.5+w,c.y=-(l.at(1,0)*c.x+l.at(1,2))/l.at(1,1),h=Math.abs(c.y-C.y),d=x(l,c),h<=.5&&d<p&&(p=d,v=c.x,m=c.y);for(y=0;y<2;y++)for(o=0;o<2;o++)c.x=C.x-.5+y,c.y=C.y-.5+o,d=x(l,c),d<p&&(p=d,v=c.x,m=c.y);e.curve.vertex[i]={x:v+S,y:m+k}}}}function b(t){let e,a,r,n=t.curve,i=n.n,s=n.vertex;for(e=0,a=i-1;e<a;e++,a--)r=s[e],s[e]=s[a],s[a]=r}function A(t){let e,r,i,s,o,y,l,x,f,p=t.curve.n,d=t.curve;for(e=0;e<p;e++)r=a(e+1,p),i=a(e+2,p),f=c(.5,d.vertex[i],d.vertex[r]),o=u(d.vertex[e],d.vertex[i]),0!==o?(s=h("dpara",d.vertex[e],d.vertex[r],d.vertex[i])/o,s=Math.abs(s),y=s>1?1-1/s:0,y/=.75):y=4/3,d.alpha0[r]=y,y>=n?(d.tag[r]="corner",d.c[3*r+1]=d.vertex[r],d.c[3*r+2]=f):(y<.55?y=.55:y>1&&(y=1),l=c(.5+.5*y,d.vertex[e],d.vertex[r]),x=c(.5+.5*y,d.vertex[i],d.vertex[r]),d.tag[r]="curve",d.c[3*r+0]=l,d.c[3*r+1]=x,d.c[3*r+2]=f),d.alpha[r]=y,d.beta[r]=.5;d.alphacurve=1}function z(t){function e(){this.pen=0,this.c=[{x:0,y:0},{x:0,y:0}],this.t=0,this.s=0,this.alpha=0}function r(t,e,r,n,i,s,o){let y,x,u,v,m,w,g,b,A,M,z,S,k,j,D,q,$,C,I,L,O,P,X,F=t.curve.n,H=t.curve,R=H.vertex;if(e==r)return 1;if(y=e,m=a(e+1,F),x=a(y+1,F),v=s[x],0===v)return 1;for(b=f(R[e],R[m]),y=x;y!=r;y=x){if(x=a(y+1,F),u=a(y+2,F),s[x]!=v)return 1;if(l(h("cprod",R[e],R[m],R[x],R[u]))!=v)return 1;if(h("iprod1",R[e],R[m],R[x],R[u])<b*f(R[x],R[u])*-.999847695156)return 1}if(z=H.c[3*a(e,F)+2],S=R[a(e+1,F)],k=R[a(r,F)],j=H.c[3*a(r,F)+2],w=o[r]-o[e],w-=h("dpara",R[0],H.c[3*e+2],H.c[3*r+2])/2,e>=r&&(w+=o[F]),C=h("dpara",z,S,k),I=h("dpara",z,S,j),L=h("dpara",z,k,j),O=C+L-I,I==C)return 1;if(X=L/(L-O),P=I/(I-C),q=I*X/2,0===q)return 1;for($=w/q,g=2-Math.sqrt(4-$/.3),n.c[0]=c(X*g,z,S),n.c[1]=c(P*g,j,k),n.alpha=g,n.t=X,n.s=P,S={x:n.c[0].x,y:n.c[0].y},k={x:n.c[1].x,y:n.c[1].y},n.pen=0,y=a(e+1,F);y!=r;y=x){if(x=a(y+1,F),X=d(z,S,k,j,R[y],R[x]),X<-.5)return 1;if(D=p(X,z,S,k,j),b=f(R[y],R[x]),0===b)return 1;if(A=h("dpara",R[y],R[x],D)/b,Math.abs(A)>i)return 1;if(h("iprod",R[y],R[x],D)<0||h("iprod",R[x],R[y],D)<0)return 1;n.pen+=A*A}for(y=e;y!=r;y=x){if(x=a(y+1,F),X=d(z,S,k,j,H.c[3*y+2],H.c[3*x+2]),X<-.5)return 1;if(D=p(X,z,S,k,j),b=f(H.c[3*y+2],H.c[3*x+2]),0===b)return 1;if(A=h("dpara",H.c[3*y+2],H.c[3*x+2],D)/b,M=h("dpara",H.c[3*y+2],H.c[3*x+2],R[x])/b,M*=.75*H.alpha[x],M<0&&(A=-A,M=-M),A<M-i)return 1;A<M&&(n.pen+=(A-M)*(A-M))}return 0}let n,s,o,y,x,u,v,m,w,g,b,A=t.curve,z=A.n,S=A.vertex,k=new Array(z+1),j=new Array(z+1),D=new Array(z+1),q=new Array(z+1),$=new e,C=new Array(z),I=new Array(z+1);for(s=0;s<z;s++)"curve"==A.tag[s]?C[s]=l(h("dpara",S[a(s-1,z)],S[s],S[a(s+1,z)])):C[s]=0;for(v=0,I[0]=0,x=A.vertex[0],s=0;s<z;s++)u=a(s+1,z),"curve"==A.tag[u]&&(m=A.alpha[u],v+=.3*m*(4-m)*h("dpara",A.c[3*s+2],S[u],A.c[3*u+2])/2,v+=h("dpara",x,A.c[3*s+2],A.c[3*u+2])/2),I[s+1]=v;for(k[0]=-1,j[0]=0,D[0]=0,o=1;o<=z;o++)for(k[o]=o-1,j[o]=j[o-1],D[o]=D[o-1]+1,s=o-2;s>=0&&(y=r(t,s,a(o,z),$,i,C,I),!y);s--)(D[o]>D[s]+1||D[o]==D[s]+1&&j[o]>j[s]+$.pen)&&(k[o]=s,j[o]=j[s]+$.pen,D[o]=D[s]+1,q[o]=$,$=new e);for(n=D[z],w=new M(n),g=new Array(n),b=new Array(n),o=z,s=n-1;s>=0;s--)k[o]==o-1?(w.tag[s]=A.tag[a(o,z)],w.c[3*s+0]=A.c[3*a(o,z)+0],w.c[3*s+1]=A.c[3*a(o,z)+1],w.c[3*s+2]=A.c[3*a(o,z)+2],w.vertex[s]=A.vertex[a(o,z)],w.alpha[s]=A.alpha[a(o,z)],w.alpha0[s]=A.alpha0[a(o,z)],w.beta[s]=A.beta[a(o,z)],g[s]=b[s]=1):(w.tag[s]="curve",w.c[3*s+0]=q[o].c[0],w.c[3*s+1]=q[o].c[1],w.c[3*s+2]=A.c[3*a(o,z)+2],w.vertex[s]=c(q[o].s,A.c[3*a(o,z)+2],S[a(o,z)]),w.alpha[s]=q[o].alpha,w.alpha0[s]=q[o].alpha,g[s]=q[o].s,b[s]=q[o].t),o=k[o];for(s=0;s<n;s++)u=a(s+1,n),w.beta[s]=g[s]/(g[s]+b[u]);w.alphacurve=1,t.curve=w}t.prototype.at=function(t,e){return this.data[3*t+e]};for(let t=0;t<s.length;t++){let e=s[t];v(e),m(e),w(e),g(e),"-"===e.sign&&b(e),A(e),r&&z(e)}}(),s}function D(t={}){Object.assign(this,t)}async function q(t,{turnpolicy:e="majority",turdsize:a=1,optcurve:r=!0,alphamax:n=1,opttolerance:i=1,minSize:s=1e3,maxSize:o=5e3,scale:y=1,addDimensions:l=!0,toRelative:x=!0,toShorthands:c=!0,decimals:u=3}={}){let h=await b(t,{minSize:s,maxSize:o,scale:y}),{bmp:f,scaleAdjust:p,width:d,height:v}=h;console.log(s,o,h);let m=j(f,{turnpolicy:e,turdsize:a,optcurve:r,alphamax:n,opttolerance:i,scaleAdjust:p,minSize:s,maxSize:o});y=1/p,console.log(x,c,u);let w=function(t=[],e=1){let a=t.length,r=[];for(let n=0;n<a;n++){let a,i=t[n].curve,s=i.n;r.push({type:"M",values:[i.c[3*(s-1)+2].x*e,i.c[3*(s-1)+2].y*e]});for(let t=0;t<s;t++){let n=i.tag[t];"curve"===n?a=[{type:"C",values:[i.c[3*t].x*e,i.c[3*t].y*e,i.c[3*t+1].x*e,i.c[3*t+1].y*e,i.c[3*t+2].x*e,i.c[3*t+2].y*e]}]:"corner"===n&&(a=[{type:"L",values:[i.c[3*t+1].x*e,i.c[3*t+1].y*e]},{type:"L",values:[i.c[3*t+2].x*e,i.c[3*t+2].y*e]}]),r.push(...a)}r.push({type:"Z",values:[]})}return r}(m,y),g=JSON.parse(JSON.stringify(w)),A=function(t,e,a,{toRelative:r=!0,toShorthands:n=!0,decimals:i=3,addDimensions:s=!1}={}){e=Math.ceil(e),a=Math.ceil(a),(r||n||-1!=i)&&(t=S(t,{toRelative:r,toShorthands:n,decimals:i}));let o=function(t,e=-1,a=!1){"l"===t[1].type&&a&&(t[0].type="m");let r=`${t[0].type}${t[0].values.join(" ")}`;for(let n=1;n<t.length;n++){let i=t[n-1],s=t[n],o=i.type===s.type&&a||("m"===i.type&&"l"===s.type||"M"===i.type&&"l"===s.type||"M"===i.type&&"L"===s.type)&&a?" ":s.type;s.values.length&&e>-1&&(s.values=s.values.map(t=>+t.toFixed(e))),r+=`${o}${s.values.join(" ")}`}return a&&(r=r.replaceAll(" 0."," .").replaceAll(" -","-").replaceAll("-0.","-.").replace(/\s+([mlcsqtahvz])/gi,"$1").replaceAll("Z","z")),r}(t,i);return{svg:`<svg viewBox="0 0 ${e} ${a}" ${s?`width="${e}" height="${a}" `:""}xmlns="http://www.w3.org/2000/svg"><path d="${o}"/></svg>`,d:o}}(w,d,v,{addDimensions:l,toRelative:x,toShorthands:c,decimals:u});return A.pathData=w,A.scaleAdjust=p,A.pathDataNorm=g,console.log("!!!data",A,w),new D(A)}g.prototype.at=function(t,e){return t>=0&&t<this.w&&e>=0&&e<this.h&&1===this.data[this.w*e+t]},g.prototype.index=function(t){let e={x:0,y:Math.floor(t/this.w)};return e.x=t-e.y*this.w,e},g.prototype.flip=function(t,e){this.at(t,e)?this.data[this.w*e+t]=0:this.data[this.w*e+t]=1},g.prototype.copy=function(){let t,e=new g(this.w,this.h);for(t=0;t<this.size;t++)e.data[t]=this.data[t];return e},D.prototype.getSVG=function(){return this.svg},D.prototype.getPathData=function(){return this.pathData},D.prototype.getD=function(){return this.d},"undefined"!=typeof window&&(window.Potrace=q),exports.PI=w,exports.Potrace=q,exports.PotraceObj=D,exports.abs=t,exports.acos=e,exports.asin=a,exports.atan=r,exports.atan2=n,exports.ceil=i,exports.cos=s,exports.exp=o,exports.floor=y,exports.hypot=x,exports.log=l,exports.max=c,exports.min=u,exports.pow=h,exports.random=f,exports.round=p,exports.sin=d,exports.sqrt=v,exports.tan=m;
