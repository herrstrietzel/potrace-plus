const{abs:t,acos:e,asin:a,atan:r,atan2:n,ceil:i,cos:l,exp:o,floor:s,log:h,hypot:y,max:c,min:u,pow:x,random:p,round:f,sin:g,sqrt:d,tan:w,PI:m}=Math;class v{constructor(t,e,a=null,r=null){this.w=t,this.h=e,this.size=t*e,this.arraybuffer=r??new ArrayBuffer(this.size),this.data=a||new Int8Array(this.arraybuffer)}at(t,e){return t>=0&&t<this.w&&e>=0&&e<this.h&&1===this.data[this.w*e+t]}index(t){const e=Math.floor(t/this.w);return{x:t-e*this.w,y:e}}flip(t,e){const a=this.w*e+t;this.data[a]^=1}copy(){const t=new v(this.w,this.h);return t.data.set(this.data),t}static from(t){return new v(t.w,t.h,t.data,t.arraybuffer)}}async function b(t,{minSize:e=1e3,maxSize:a=2500,filter:r="",scale:n=1,stripWhite:i=!0,crop:l=!0,canvas:o=null,brightness:s=1,contrast:h=1,invert:y=!1,blur:c=0}={}){let u,x,p=function(t){if(t instanceof HTMLImageElement)return"img";if(t instanceof SVGElement)return"svg";if(t instanceof HTMLCanvasElement)return"canvas";if(t instanceof File)return"file";if(t instanceof ArrayBuffer)return"buffer";if(t instanceof Blob)return"blob";if(Array.isArray(t))return"array";if("string"==typeof t){let e=/^(file:|https?:\/\/|\/|\.\/|\.\.\/)/.test(t),a=t.startsWith("data:image");return e||a?"url":"string"}let e=typeof t,a=t.constructor.name;return(a||e).toLowerCase()}(t),f={minSize:e,maxSize:a,filter:r,scale:n,brightness:s,contrast:h,invert:y,blur:c,canvas:o};if("img"===p)x=t.src,u=await M(x,f);else if("blob"===p||"file"===p)x=await URL.createObjectURL(t),u=await M(x,f);else if("url"===p)x=t,console.log("is URL",t),u=await M(x,f);else if("svg"===p)x=await $(t),u=await M(x,f);else if("canvas"===p){let e=t.getContext("2d"),a=`grayscale(1) invert(${y=y?"1":"0"}) blur(${c}px) brightness(${s}) contrast(${h})`;e.filter=a;let r=await e.getImageData(0,0,t.width,t.height);u={imgData:r,width:r.width,height:r.height,scaleAdjust:1}}let{imgData:g,scaleAdjust:d,width:w,height:m}=u,b=w,A=m,D={x:0,y:0,width:0,height:0};l&&(D=function(t,e=!0,a=!0,r=!1,n=null){let[i,l]=[t.width,t.height];if(!i&&!l)throw new Error("No width or height specified");let o,s=[],h={x:0,y:0,width:i,height:l},y=new Uint32Array(t.data.buffer),c=0,u="";const x=(t,e,a)=>{let r=Math.floor(a/t);return{x:a-r*t,y:r}},p=(t=0,e=!1,a=null)=>{if(r&&a){c++;let t=x(i,0,a);u+=`<rect x="${t.x}" y="${t.y}" transform="scale(1)" transform-origin="center" width="1" height="1" fill="rgba(0,255,255,0.25)" stroke="none" />`}return e?t<4294867295:t>0};let f=0,g=0,d=0,w=0,m=i,v=l,b=0,M=i*l-1,[A,$,D,S]=[1,1,1,1];if(a){let t=Math.floor(i/2),a=Math.floor(l/2),n=[0,l*i-1,i-1,l*i-i,t,l*i-t-1,a*i-1,a*i];for(let t=0;t<n.length;t++){let a=n[t];if(!(A||S||$||D))break;p(y[a],e,a)&&(0===t?(A=0,$=0):1===t?(S=0,D=0):2===t?(S=0,$=0):3===t?(A=0,$=0):4===t?A=0:5===t?S=0:6===t?D=0:7===t&&($=0))}if(r&&console.log("corner mid check",c,"cropTop",A,"cropLeft",$,"cropRight",D,"cropBottom",S),!(A||$||D||S))return r&&console.log("image cannot be cropped â€“ opaque pixels in corners",c,"cropTop",A,"cropLeft",$,"cropRight",D,"cropBottom",S),h}for(g=0;g<l;g++){for(f=0;f<i&&(!A||!p(y[b],e,b)||(d=g,A=0,s.push(f),S))&&(!S||!p(y[M],e,M)||(v=l-g,S=0,o=x(i,0,M),s.push(o.x),A));f++)b++,M--;if(!A&&!S)break;if(g+2>=l-g&&!d)return r&&(console.log("image is empty",g,c,i*l),n.insertAdjacentHTML("beforeend",u)),h}for(f=0;f<i;f++)for(b=(d+1)*i+f,M=d*i+(i-f-1),g=d;g<v-1&&(!$||!p(y[b],e,b)||(w=f,$=0,D))&&(!D||!p(y[M],e,M)||(m=i-f,D=0,$));g++)b+=i,M+=i;return w=Math.min(...s,w),m=Math.max(...s,m),h.x=w,h.y=d,h.width=m-w,h.height=v-d,r&&(console.log(c,i*l,"skipped:",i*l-c,s),n.insertAdjacentHTML("beforeend",u)),h}(g,i),w=Math.ceil(D.width/d),m=Math.ceil(D.height/d),u.width=w,u.height=m);let S=function(t,e=0,a=0,r=0,n=0){let{data:i,width:l,height:o}=t;r=r||l,n=n||o;let s=new v(r,n),h=4*l,y=0;for(let t=a;t<a+n;t++){let a=0,n=t*h;for(let t=e;t<e+r;t++){let e=i[n+4*t],l=y*r+a;s.data[l]=e<127?1:0,a++}y++}return s}(g,D.x,D.y,D.width,D.height);return{bmp:S,scaleAdjust:d,width:w,height:m,bb:D,w:b,h:A}}async function M(t="",{minSize:e=1e3,maxSize:a=2500,scale:r=1,brightness:n=1,contrast:i=1,invert:l=0,blur:o=0,canvas:s=null}={}){let h,y,c,u,x=1,p=0;e*=r,a*=r,s||((s=document.getElementById("canvasPot"))||(s=document.createElement("canvas")),s.id="canvasPot",document.body.append(s));let f=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),g=await fetch(t);if(g.ok){let r=await g.blob(),{type:d}=r;"image/svg+xml"!==d?(h=await createImageBitmap(r),[y,c]=[h.width,h.height]):(h=new Image,h.src=t,h.crossOrigin="anonymous",await h.decode(),[y,c]=[h.naturalWidth,h.naturalHeight]),p=Math.min(y,c),x=p<e||p>a?e/p:1,y*=x,c*=x,s.width=y,s.height=c,f.fillStyle="white",f.fillRect(0,0,y,c);let w=`grayscale(1) invert(${l=l?"1":"0"}) blur(${o}px) brightness(${n}) contrast(${i})`;f.filter=w,f.drawImage(h,0,0,y,c),u=f.getImageData(0,0,y,c)}let{width:d,height:w}=u;return d=Math.ceil(d/x),w=Math.ceil(w/x),{imgData:u,scaleAdjust:x,width:d,height:w}}async function A(t,{minSize:e=1e3,maxSize:a=2500,filter:r="",scale:n=1,canvas:i=null}={}){i||(i=document.createElement("canvas"));let l=await $(t),o=new Image;o.src=l,o.crossOrigin="anonymous",await o.decode();let[s,h]=[o.naturalWidth,o.naturalHeight],y=Math.min(s,h),c=y<e||y>a?e/y:1,u=s*c,x=h*c;i.width=u,i.height=x;let p=i.getContext("2d");return p.fillStyle="white",p.fillRect(0,0,u,x),r&&(p.filter=r),p.drawImage(o,0,0,u,x),URL.revokeObjectURL(l),i}async function $(t){const e=t.cloneNode(!0);if(document.body.append(e),!e.hasAttribute("width")&&!e.hasAttribute("height")){let a=e.hasAttribute("viewBox")?{x:0,y:0,width:300,height:150}:t.getBBox(),r=t.viewBox.baseVal.width?e.viewBox.baseVal.width:t.width.baseVal.value?t.width.baseVal.value:a.width,n=t.viewBox.baseVal.height?e.viewBox.baseVal.height:t.height.baseVal.value?t.height.baseVal.value:a.height;e.setAttribute("width",r),e.setAttribute("height",n)}let a=(new XMLSerializer).serializeToString(e),r=new Blob([a],{type:"image/svg+xml"}),n=URL.createObjectURL(r);return e.remove(),n}function D(){this.area=0,this.len=0,this.curve={},this.pt=[],this.minX=1e5,this.minY=1e5,this.maxX=-1,this.maxY=-1}function S(t){this.n=t,this.tag=new Array(t),this.c=new Array(3*t),this.alphaCurve=0,this.vertex=new Array(t),this.alpha=new Array(t),this.alpha0=new Array(t),this.beta=new Array(t)}function L(t,e=1){let a=t.curve,r=a.n,n=[];n.push({x:a.c[3*(r-1)+2].x*e,y:a.c[3*(r-1)+2].y*e});for(let t=0;t<r;t++){let r=a.tag[t];"curve"===r?n.push({x:a.c[3*t+2].x*e,y:a.c[3*t+2].y*e}):"corner"===r&&n.push({x:a.c[3*t+1].x*e,y:a.c[3*t+1].y*e},{x:a.c[3*t+2].x*e,y:a.c[3*t+2].y*e})}return n}function z(t,{turnpolicy:e="majority",turdsize:a=1,optcurve:r=!0,alphamax:n=1,opttolerance:i=1,getPolygon:l=!0}={}){let o=[],s=[];return(()=>{let r,n=t.copy(),i={x:0,y:0};const l=t=>{let e=n.w*t.y+t.x;for(;e<n.size&&1!==n.data[e];)e++;return e<n.size&&n.index(e)},s=(t,e)=>{for(let a=2;a<5;a++){let r=0;for(let i=1-a;i<=a-1;i++)r+=n.at(t+i,e+a-1)?1:-1,r+=n.at(t+a-1,e+i-1)?1:-1,r+=n.at(t+i-1,e-a)?1:-1,r+=n.at(t-a,e+i)?1:-1;if(r>0)return 1;if(r<0)return 0}return 0},h=a=>{let r,i=new D,l=a.x,o=a.y,h=0,y=1;for(i.sign=t.at(a.x,a.y)?"+":"-";i.pt.push({x:l,y:o}),l>i.maxX&&(i.maxX=l),l<i.minX&&(i.minX=l),o>i.maxY&&(i.maxY=o),o<i.minY&&(i.minY=o),i.len++,l+=h,o+=y,i.area-=l*y,l!==a.x||o!==a.y;){let t=n.at(l+(h+y-1)/2,o+(y-h-1)/2),a=n.at(l+(h-y-1)/2,o+(y+h-1)/2);a&&!t?"right"===e||"black"===e&&"+"===i.sign||"white"===e&&"-"===i.sign||"majority"===e&&s(l,o)||"minority"===e&&!s(l,o)?(r=h,h=-y,y=r):(r=h,h=y,y=-r):a?(r=h,h=-y,y=r):t||(r=h,h=y,y=-r)}return i},y=t=>{let e,a,r=t.pt[0].y,i=t.len;for(let l=1;l<i;l++){let i=t.pt[l].x,o=t.pt[l].y;if(o!==r){a=r<o?r:o,e=t.maxX;for(let t=i;t<e;t++)n.flip(t,a);r=o}}};for(;i=l(i);)r=h(i),y(r),r.area>a&&o.push(r)})(),(()=>{function t(){this.data=[0,0,0,0,0,0,0,0,0]}function e(t,e,a,r,n){this.x=t,this.y=e,this.xy=a,this.x2=r,this.y2=n}t.prototype.at=function(t,e){return this.data[3*t+e]};const a=(t,e)=>t>=e?t%e:t>=0?t:e-1-(-1-t)%e,h=(t,e)=>t.x*e.y-t.y*e.x,y=(t,e,a)=>t<=a?t<=e&&e<a:t<=e||e<a,c=t=>t>0?1:t<0?-1:0,u=(t,e)=>{let a=new Array(3),r=0;a[0]=e.x,a[1]=e.y,a[2]=1;for(let e=0;e<3;e++)for(let n=0;n<3;n++)r+=a[e]*t.at(e,n)*a[n];return r},x=(t,e,a)=>({x:e.x+t*(a.x-e.x),y:e.y+t*(a.y-e.y)}),p=(t,e)=>{let a=((t,e)=>({x:-c(e.y-t.y),y:c(e.x-t.x)}))(t,e);return a.y*(e.x-t.x)-a.x*(e.y-t.y)},f=(t="",e={},a={},r={},n={})=>{let i,l,o,s;return"cprod"===t||"iprod1"===t?(i=a.x-e.x,o=a.y-e.y,l=n.x-r.x,s=n.y-r.y):(i=a.x-e.x,o=a.y-e.y,l=r.x-e.x,s=r.y-e.y),"cprod"===t||"dpara"===t?i*s-l*o:i*l+o*s},g=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),d=(t,e,a,r,n)=>{let i=1-t;return{x:i*i*i*e.x+i*i*t*3*a.x+t*t*i*3*r.x+t*t*t*n.x,y:i*i*i*e.y+i*i*t*3*a.y+t*t*i*3*r.y+t*t*t*n.y}},w=(t,e,a,r,n,i)=>{let l=f("cprod",t,e,n,i),o=f("cprod",e,a,n,i),s=l-2*o+f("cprod",a,r,n,i),h=-2*l+2*o,y=h*h-4*s*l;if(0===s||y<0)return-1;let c=Math.sqrt(y),u=(-h+c)/(2*s),x=(-h-c)/(2*s);return u>=0&&u<=1?u:x>=0&&x<=1?x:-1},m=t=>{t.x0=t.pt[0].x,t.y0=t.pt[0].y,t.sums=[];let a=t.sums;a.push(new e(0,0,0,0,0));for(let r=0;r<t.len;r++){let n=t.pt[r].x-t.x0,i=t.pt[r].y-t.y0;a.push(new e(a[r].x+n,a[r].y+i,a[r].xy+n*i,a[r].x2+n*n,a[r].y2+i*i))}},v=t=>{let e,r=t.len,n=t.pt,i=new Array(r),l=new Array(r),o=new Array(4);t.lon=new Array(r);let s,u,x,p,f,g,d,w,m=[{x:0,y:0},{x:0,y:0}],v={x:0,y:0},b={x:0,y:0},M={x:0,y:0},A=0;for(u=r-1;u>=0;u--)n[u].x!=n[A].x&&n[u].y!=n[A].y&&(A=u+1),l[u]=A;for(u=r-1;u>=0;u--){for(o[0]=o[1]=o[2]=o[3]=0,e=(3+3*(n[a(u+1,r)].x-n[u].x)+(n[a(u+1,r)].y-n[u].y))/2,o[e]++,m[0].x=0,m[0].y=0,m[1].x=0,m[1].y=0,A=l[u],p=u;;){if(s=0,e=(3+3*c(n[A].x-n[p].x)+c(n[A].y-n[p].y))/2,o[e]++,o[0]&&o[1]&&o[2]&&o[3]){i[u]=p,s=1;break}if(v.x=n[A].x-n[u].x,v.y=n[A].y-n[u].y,h(m[0],v)<0||h(m[1],v)>0)break;if(Math.abs(v.x)<=1&&Math.abs(v.y)<=1||(b.x=v.x+(v.y>=0&&(v.y>0||v.x<0)?1:-1),b.y=v.y+(v.x<=0&&(v.x<0||v.y<0)?1:-1),h(m[0],b)>=0&&(m[0].x=b.x,m[0].y=b.y),b.x=v.x+(v.y<=0&&(v.y<0||v.x<0)?1:-1),b.y=v.y+(v.x>=0&&(v.x>0||v.y<0)?1:-1),h(m[1],b)<=0&&(m[1].x=b.x,m[1].y=b.y)),p=A,A=l[p],!y(A,u,p))break}0===s&&(M.x=c(n[A].x-n[p].x),M.y=c(n[A].y-n[p].y),v.x=n[p].x-n[u].x,v.y=n[p].y-n[u].y,f=h(m[0],v),g=h(m[0],M),d=h(m[1],v),w=h(m[1],M),x=1e7,g<0&&(x=Math.floor(f/-g)),w>0&&(x=Math.min(x,Math.floor(-d/w))),i[u]=a(p+x,r))}for(x=i[r-1],t.lon[r-1]=x,u=r-2;u>=0;u--)y(u+1,i[u],x)&&(x=i[u]),t.lon[u]=x;for(u=r-1;y(a(u+1,r),x,t.lon[u]);u--)t.lon[u]=x},b=t=>{const e=(t,e,a)=>{let r,n,i,l,o,s,h,y,c,u,x,p,f,g,d=t.len,w=t.pt,m=t.sums,v=0;return a>=d&&(a-=d,v=1),0===v?(r=m[a+1].x-m[e].x,n=m[a+1].y-m[e].y,l=m[a+1].x2-m[e].x2,i=m[a+1].xy-m[e].xy,o=m[a+1].y2-m[e].y2,s=a+1-e):(r=m[a+1].x-m[e].x+m[d].x,n=m[a+1].y-m[e].y+m[d].y,l=m[a+1].x2-m[e].x2+m[d].x2,i=m[a+1].xy-m[e].xy+m[d].xy,o=m[a+1].y2-m[e].y2+m[d].y2,s=a+1-e+d),x=(w[e].x+w[a].x)/2-w[0].x,p=(w[e].y+w[a].y)/2-w[0].y,g=w[a].x-w[e].x,f=-(w[a].y-w[e].y),h=(l-2*r*x)/s+x*x,y=(i-r*p-n*x)/s+x*p,c=(o-2*n*p)/s+p*p,u=f*f*h+2*f*g*y+g*g*c,Math.sqrt(u)};let r,n,i,l,o,s,h,y=t.len,c=new Array(y+1),u=new Array(y+1),x=new Array(y),p=new Array(y+1),f=new Array(y+1),g=new Array(y+1);for(r=0;r<y;r++)h=a(t.lon[a(r-1,y)]-1,y),h==r&&(h=a(r+1,y)),x[r]=h<r?y:h;for(n=1,r=0;r<y;r++)for(;n<=x[r];)p[n]=r,n++;for(r=0,n=0;r<y;n++)f[n]=r,r=x[r];for(f[n]=y,i=n,r=y,n=i;n>0;n--)g[n]=r,r=p[r];for(g[0]=0,c[0]=0,n=1;n<=i;n++)for(r=g[n];r<=f[n];r++){for(s=-1,l=f[n-1];l>=p[r];l--)o=e(t,l,r)+c[l],(s<0||o<s)&&(u[r]=l,s=o);c[r]=s}for(t.m=i,t.po=new Array(i),r=y,n=i-1;r>0;n--)r=u[r],t.po[n]=r},M=e=>{const r=(t,e,a,r,n)=>{let i,l,o,s,h,y,c,u,x,p,f,g=t.len,d=t.sums,w=0;for(;a>=g;)a-=g,w+=1;for(;e>=g;)e-=g,w-=1;for(;a<0;)a+=g,w-=1;for(;e<0;)e+=g,w+=1;i=d[a+1].x-d[e].x+w*d[g].x,l=d[a+1].y-d[e].y+w*d[g].y,o=d[a+1].x2-d[e].x2+w*d[g].x2,s=d[a+1].xy-d[e].xy+w*d[g].xy,h=d[a+1].y2-d[e].y2+w*d[g].y2,y=a+1-e+w*g,r.x=i/y,r.y=l/y,c=(o-i*i/y)/y,u=(s-i*l/y)/y,x=(h-l*l/y)/y,p=(c+x+Math.sqrt((c-x)*(c-x)+4*u*u))/2,c-=p,x-=p,Math.abs(c)>=Math.abs(x)?(f=Math.sqrt(c*c+u*u),0!==f&&(n.x=-u/f,n.y=c/f)):(f=Math.sqrt(x*x+u*u),0!==f&&(n.x=-x/f,n.y=u/f)),0===f&&(n.x=n.y=0)};let n,i,l,o,s,h,y,c,x,p,f,g,d,w,m,v=e.m,b=e.po,M=e.len,A=e.pt,$=e.x0,D=e.y0,L=new Array(v),z=new Array(v),k=new Array(v),j=new Array(3),R={x:0,y:0};for(e.curve=new S(v),i=0;i<v;i++)l=b[a(i+1,v)],l=a(l-b[i],M)+b[i],L[i]={x:0,y:0},z[i]={x:0,y:0},r(e,b[i],l,L[i],z[i]);for(i=0;i<v;i++)if(k[i]=new t,n=z[i].x*z[i].x+z[i].y*z[i].y,0===n)for(l=0;l<3;l++)for(o=0;o<3;o++)k[i].data[3*l+o]=0;else for(j[0]=z[i].y,j[1]=-z[i].x,j[2]=-j[1]*L[i].y-j[0]*L[i].x,s=0;s<3;s++)for(o=0;o<3;o++)k[i].data[3*s+o]=j[s]*j[o]/n;for(i=0;i<v;i++){for(h=new t,y={x:0,y:0},R.x=A[b[i]].x-$,R.y=A[b[i]].y-D,l=a(i-1,v),s=0;s<3;s++)for(o=0;o<3;o++)h.data[3*s+o]=k[l].at(s,o)+k[i].at(s,o);for(;;){if(p=h.at(0,0)*h.at(1,1)-h.at(0,1)*h.at(1,0),0!==p){y.x=(-h.at(0,2)*h.at(1,1)+h.at(1,2)*h.at(0,1))/p,y.y=(h.at(0,2)*h.at(1,0)-h.at(1,2)*h.at(0,0))/p;break}for(h.at(0,0)>h.at(1,1)?(j[0]=-h.at(0,1),j[1]=h.at(0,0)):h.at(1,1)?(j[0]=-h.at(1,1),j[1]=h.at(1,0)):(j[0]=1,j[1]=0),n=j[0]*j[0]+j[1]*j[1],j[2]=-j[1]*R.y-j[0]*R.x,s=0;s<3;s++)for(o=0;o<3;o++)h.data[3*s+o]+=j[s]*j[o]/n}if(c=Math.abs(y.x-R.x),x=Math.abs(y.y-R.y),c<=.5&&x<=.5)e.curve.vertex[i]={x:y.x+$,y:y.y+D};else{if(f=u(h,R),d=R.x,w=R.y,0!==h.at(0,0))for(m=0;m<2;m++)y.y=R.y-.5+m,y.x=-(h.at(0,1)*y.y+h.at(0,2))/h.at(0,0),c=Math.abs(y.x-R.x),g=u(h,y),c<=.5&&g<f&&(f=g,d=y.x,w=y.y);if(0!==h.at(1,1))for(m=0;m<2;m++)y.x=R.x-.5+m,y.y=-(h.at(1,0)*y.x+h.at(1,2))/h.at(1,1),x=Math.abs(y.y-R.y),g=u(h,y),x<=.5&&g<f&&(f=g,d=y.x,w=y.y);for(s=0;s<2;s++)for(o=0;o<2;o++)y.x=R.x-.5+s,y.y=R.y-.5+o,g=u(h,y),g<f&&(f=g,d=y.x,w=y.y);e.curve.vertex[i]={x:d+$,y:w+D}}}},A=t=>{let e,a,r,n=t.curve,i=n.n,l=n.vertex;for(e=0,a=i-1;e<a;e++,a--)r=l[e],l[e]=l[a],l[a]=r},$=t=>{let e,r,i,l,o,s,h,y,c,u=t.curve.n,g=t.curve;for(e=0;e<u;e++)r=a(e+1,u),i=a(e+2,u),c=x(.5,g.vertex[i],g.vertex[r]),o=p(g.vertex[e],g.vertex[i]),0!==o?(l=f("dpara",g.vertex[e],g.vertex[r],g.vertex[i])/o,l=Math.abs(l),s=l>1?1-1/l:0,s/=.75):s=4/3,g.alpha0[r]=s,s>=n?(g.tag[r]="corner",g.c[3*r+1]=g.vertex[r],g.c[3*r+2]=c):(s<.55?s=.55:s>1&&(s=1),h=x(.5+.5*s,g.vertex[e],g.vertex[r]),y=x(.5+.5*s,g.vertex[i],g.vertex[r]),g.tag[r]="curve",g.c[3*r+0]=h,g.c[3*r+1]=y,g.c[3*r+2]=c),g.alpha[r]=s,g.beta[r]=.5;g.alphacurve=1},D=t=>{function e(){this.pen=0,this.c=[{x:0,y:0},{x:0,y:0}],this.t=0,this.s=0,this.alpha=0}const r=(t,e,r,n,i,l,o)=>{let s,h,y,u,p,m,v,b,M,A,$,D,S,L,z,k,j,R,P,C,B,F,E,T=t.curve.n,O=t.curve,V=O.vertex;if(e==r)return 1;if(s=e,p=a(e+1,T),h=a(s+1,T),u=l[h],0===u)return 1;for(b=g(V[e],V[p]),s=h;s!=r;s=h){if(h=a(s+1,T),y=a(s+2,T),l[h]!=u)return 1;if(c(f("cprod",V[e],V[p],V[h],V[y]))!=u)return 1;if(f("iprod1",V[e],V[p],V[h],V[y])<b*g(V[h],V[y])*-.999847695156)return 1}if($=O.c[3*a(e,T)+2],D=V[a(e+1,T)],S=V[a(r,T)],L=O.c[3*a(r,T)+2],m=o[r]-o[e],m-=f("dpara",V[0],O.c[3*e+2],O.c[3*r+2])/2,e>=r&&(m+=o[T]),R=f("dpara",$,D,S),P=f("dpara",$,D,L),C=f("dpara",$,S,L),B=R+C-P,P===R)return 1;if(E=C/(C-B),F=P/(P-R),k=P*E/2,0===k)return 1;for(j=m/k,v=2-Math.sqrt(4-j/.3),n.c[0]=x(E*v,$,D),n.c[1]=x(F*v,L,S),n.alpha=v,n.t=E,n.s=F,D={x:n.c[0].x,y:n.c[0].y},S={x:n.c[1].x,y:n.c[1].y},n.pen=0,s=a(e+1,T);s!=r;s=h){if(h=a(s+1,T),E=w($,D,S,L,V[s],V[h]),E<-.5)return 1;if(z=d(E,$,D,S,L),b=g(V[s],V[h]),0===b)return 1;if(M=f("dpara",V[s],V[h],z)/b,Math.abs(M)>i)return 1;if(f("iprod",V[s],V[h],z)<0||f("iprod",V[h],V[s],z)<0)return 1;n.pen+=M*M}for(s=e;s!=r;s=h){if(h=a(s+1,T),E=w($,D,S,L,O.c[3*s+2],O.c[3*h+2]),E<-.5)return 1;if(z=d(E,$,D,S,L),b=g(O.c[3*s+2],O.c[3*h+2]),0===b)return 1;if(M=f("dpara",O.c[3*s+2],O.c[3*h+2],z)/b,A=f("dpara",O.c[3*s+2],O.c[3*h+2],V[h])/b,A*=.75*O.alpha[h],A<0&&(M=-M,A=-A),M<A-i)return 1;M<A&&(n.pen+=(M-A)*(M-A))}return 0};let n,l,o,s,h,y,u,p,m,v,b,M=t.curve,A=M.n,$=M.vertex,D=new Array(A+1),L=new Array(A+1),z=new Array(A+1),k=new Array(A+1),j=new e,R=new Array(A),P=new Array(A+1);for(l=0;l<A;l++)"curve"==M.tag[l]?R[l]=c(f("dpara",$[a(l-1,A)],$[l],$[a(l+1,A)])):R[l]=0;for(u=0,P[0]=0,h=M.vertex[0],l=0;l<A;l++)y=a(l+1,A),"curve"==M.tag[y]&&(p=M.alpha[y],u+=.3*p*(4-p)*f("dpara",M.c[3*l+2],$[y],M.c[3*y+2])/2,u+=f("dpara",h,M.c[3*l+2],M.c[3*y+2])/2),P[l+1]=u;for(D[0]=-1,L[0]=0,z[0]=0,o=1;o<=A;o++)for(D[o]=o-1,L[o]=L[o-1],z[o]=z[o-1]+1,l=o-2;l>=0&&(s=r(t,l,a(o,A),j,i,R,P),!s);l--)(z[o]>z[l]+1||z[o]==z[l]+1&&L[o]>L[l]+j.pen)&&(D[o]=l,L[o]=L[l]+j.pen,z[o]=z[l]+1,k[o]=j,j=new e);for(n=z[A],m=new S(n),v=new Array(n),b=new Array(n),o=A,l=n-1;l>=0;l--)D[o]==o-1?(m.tag[l]=M.tag[a(o,A)],m.c[3*l+0]=M.c[3*a(o,A)+0],m.c[3*l+1]=M.c[3*a(o,A)+1],m.c[3*l+2]=M.c[3*a(o,A)+2],m.vertex[l]=M.vertex[a(o,A)],m.alpha[l]=M.alpha[a(o,A)],m.alpha0[l]=M.alpha0[a(o,A)],m.beta[l]=M.beta[a(o,A)],v[l]=b[l]=1):(m.tag[l]="curve",m.c[3*l+0]=k[o].c[0],m.c[3*l+1]=k[o].c[1],m.c[3*l+2]=M.c[3*a(o,A)+2],m.vertex[l]=x(k[o].s,M.c[3*a(o,A)+2],$[a(o,A)]),m.alpha[l]=k[o].alpha,m.alpha0[l]=k[o].alpha,v[l]=k[o].s,b[l]=k[o].t),o=D[o];for(l=0;l<n;l++)y=a(l+1,n),m.beta[l]=v[l]/(v[l]+b[y]);m.alphacurve=1,t.curve=m};for(let t=0;t<o.length;t++){let e=o[t];if(m(e),v(e),b(e),M(e),"-"===e.sign&&A(e),$(e),l){let t=L(e);s.push(t)}r&&D(e)}})(),{pathList:o,polygons:s}}function k(t,e,a,r=!1){const n=(t,e,a)=>t>=e&&t<=a||t<=e&&t>=a;let i=!1;if((!r||!a.bottom)&&(a.left>t.x||a.top>t.y||a.bottom<t.y||a.right<t.x))return!1;for(let a=e.length-1,r=0;r<e.length;a=r,r++){const l=e[a],o=e[r];if(t.x==l.x&&t.y==l.y||t.x==o.x&&t.y==o.y)return!0;if(l.y==o.y&&t.y==l.y&&n(t.x,l.x,o.x))return!0;if(n(t.y,l.y,o.y)){if(t.y==l.y&&o.y>=l.y||t.y==o.y&&l.y>=o.y)continue;const e=(l.x-t.x)*(o.y-t.y)-(o.x-t.x)*(l.y-t.y);if(0==e)return!0;l.y<o.y==e>0&&(i=!i)}}return!!i}function j(t,e=!1){let a=[];return t[0].values[0],t[0].values[1],t.forEach(t=>{let{type:r,values:n}=t;if(n.length)if(e)for(let t=1;t<n.length;t+=2)a.push({x:n[t-1],y:n[t]});else a.push({x:n[n.length-2],y:n[n.length-1]})}),a}function R(t,e){let[a,r,n,i,l,o]=[t.x,t.y,t.width,t.height,t.x+t.width,t.y+t.height],[s,h,y,c,u,x]=[e.x,e.y,e.width,e.height,e.x+e.width,e.y+e.height],p=!1;return n*i!=y*c&&n*i>y*c&&a<s&&l>u&&r<h&&o>x&&(p=!0),p}function P(t,e=-1){let a=!("auto"!=e||!t[0].hasOwnProperty("decimals"));for(let r=0,n=t.length;r<n;r++){let n=t[r];(e>-1||a)&&(e=a?n.decimals:e,t[r].values=n.values.map(t=>t?+t.toFixed(e):t))}return t}function C(t,{toShorthands:e=!0,toRelative:a=!0,decimals:r=3}={}){return r>-1&&r<2&&(t=P(t,r)),e&&(t=function(t,e=-1,a=!0){let r;if(a){let e=t.map(t=>t.type).join("");r=/[astvqmhlc]/g.test(e)}t=a&&r?function(t,e=-1){return B(t,!1,e)}(t,e):t;let n={type:"M",values:t[0].values};t[0].decimals&&(n.decimals=t[0].decimals);let i,l=[n],o={x:t[0].values[0],y:t[0].values[1]},s=.01;for(let a=1,r=t.length;a<r;a++){let r=t[a],{type:h,values:y}=r,c=y.slice(-2),u=t[a-1],x=u.type;i={x:c[0],y:c[1]};let p,f,g,d,w={x:y[0],y:y[1]},m=Math.abs(i.x-o.x),v=Math.abs(i.y-o.y),b=(m+v)/2*s;switch(h){case"L":n=0===v||v<b&&m>b?{type:"H",values:[y[0]]}:0===m||v>b&&m<b?{type:"V",values:[y[1]]}:r;break;case"Q":if("Q"!==x){o={x:c[0],y:c[1]},l.push(r);continue}let t={x:u.values[0],y:u.values[1]};d={x:2*o.x-t.x,y:2*o.y-t.y},p=Math.abs(w.x-d.x),f=Math.abs(w.y-d.y),g=(p+f)/2,n=g<b?{type:"T",values:[i.x,i.y]}:r;break;case"C":let e={x:y[2],y:y[3]};if("C"!==x){l.push(r),o={x:c[0],y:c[1]};continue}let a={x:u.values[2],y:u.values[3]};d={x:2*o.x-a.x,y:2*o.y-a.y},p=Math.abs(w.x-d.x),f=Math.abs(w.y-d.y),g=(p+f)/2,n=g<b?{type:"S",values:[e.x,e.y,i.x,i.y]}:r;break;default:n={type:h,values:y}}(r.decimals||0===r.decimals)&&(n.decimals=r.decimals),e>-1&&(n.values=n.values.map(t=>+t.toFixed(e))),o={x:c[0],y:c[1]},l.push(n)}return l}(t)),a&&(t=function(t,e=-1){return B(t,!0,e)}(t)),r>-1&&(t=P(t,r)),t}function B(t,e=!1,a=-1){a>=0&&(t[0].values=t[0].values.map(t=>+t.toFixed(a)));let r=t[0].values,n=r[0],i=r[1],l=n,o=i;for(let r=1,s=t.length;r<s;r++){let s=t[r],{type:h,values:y}=s,c=e?h.toLowerCase():h.toUpperCase();if(h!==c)switch(h=c,s.type=h,h){case"a":case"A":y[5]=e?y[5]-n:y[5]+n,y[6]=e?y[6]-i:y[6]+i;break;case"v":case"V":y[0]=e?y[0]-i:y[0]+i;break;case"h":case"H":y[0]=e?y[0]-n:y[0]+n;break;case"m":case"M":e?(y[0]-=n,y[1]-=i):(y[0]+=n,y[1]+=i),l=e?y[0]+n:y[0],o=e?y[1]+i:y[1];break;default:if(y.length)for(let t=0;t<y.length;t++)y[t]=e?y[t]-(t%2?i:n):y[t]+(t%2?i:n)}let u=y.length;switch(h){case"z":case"Z":n=l,i=o;break;case"h":case"H":n=e?n+y[0]:y[0];break;case"v":case"V":i=e?i+y[0]:y[0];break;case"m":case"M":l=y[u-2]+(e?n:0),o=y[u-1]+(e?i:0);default:n=y[u-2]+(e?n:0),i=y[u-1]+(e?i:0)}a>=0&&(s.values=s.values.map(t=>+t.toFixed(a)))}return t}function F(t,e=!1,a=!0){let r=[],n=t.length,i=t[0].values[0],l=t[0].values[1];if(!("z"===t[n-1].type.toLowerCase()))return t;let o=0;if(a){let e=[];for(let a=0,r=t.length;a<r;a++){let r=t[a],{type:n,values:i}=r;if(i.length){let t=i.slice(-2),r={x:t[0],y:t[1],dist:0,index:0};r.index=a,e.push(r)}}e=e.sort((t,e)=>t.x-e.x||t.y-e.y),o=e[0].index}t=function(t,e){let a=t.length,r=0,n=t[a-1].type,i="z"===n.toLowerCase();if(!i||e<1||t.length<3)return t;let l=i?1:0;(function(t){let e=t.length,a="Z"==t[e-1].type,r=t[0],[n,i]=[r.values[0],r.values[1]].map(t=>+t.toFixed(8)),l=a?t[e-2]:t[e-1],o=l.values.length,[s,h]=[l.values[o-2],l.values[o-1]].map(t=>+t.toFixed(8));!a||n==s&&i==h||(t.pop(),t.push({type:"L",values:[n,i]},{type:"Z",values:[]}))})(t),r=e+1<t.length-1?e+1:t.length-1-l;let o=t.slice(r),s=t.slice(0,r);s.shift();let h,y,c=s.length;h=s[c-1].values||[],y=[h[h.length-2],h[h.length-1]],l&&(o.pop(),s.push({type:"Z",values:[]}));return t=[{type:"M",values:y},...o,...s],t}(t,o),n=t.length;let s=t[n-2],h=s.type,y=s.values.slice(-2),c="L"===h&&y[0]===i&&y[1]===l;return e&&c&&t.splice(n-2,1),r.push(...t),r}function E(t){let e={x:t[0].values[0],y:t[0].values[1]},a=e,r=[t[0]];for(let n=1,i=t.length;n<i;n++){let i=t[n],{type:l,values:o,t:s=0}=i,h=o.slice(-2);a={x:h[0],y:h[1]},"L"===l&&a.x===e.x&&a.y===e.y||(r.push(i),e=a)}return r}function T(t,e=.001){let a=0;for(let e=0,r=t.length;r&&e<r;e++){a+=t[e].x*t[e===t.length-1?0:e+1].y*.5-t[e===t.length-1?0:e+1].x*t[e].y*.5}return a}function O(t,e=1e-5){let a=[t[0]],r={x:t[0].values[0],y:t[0].values[1]},n=r,i=r;for(let l=1,o=t.length;l<o;l++){let s=t[l],h=t[l+1]||t[o-1],y="Z"===h.type?r:{x:h.values[h.values.length-2],y:h.values[h.values.length-1]},{type:c,values:u}=s,x=u.slice(-2);i="Z"!==c?{x:x[0],y:x[1]}:r;let p="C"===c?[{x:u[0],y:u[1]},{x:u[2],y:u[3]}]:"Q"===c?[{x:u[0],y:u[1]}]:[],f=Math.abs(T([n,...p,i,y]));n=i,f<e||("M"===c?(r=i,n=r):"Z"===c&&(n=r),a.push(s))}return a.push({type:"Z",values:[]}),a}function V(t,e=0){let a=(e=parseFloat(e))>1,r=!a&&!e;"l"===t[1].type&&r&&(t[0].type="m");let n="",i=a?"\n":" ";n=r?`${t[0].type} ${t[0].values.join(" ")}`:`${t[0].type} ${t[0].values.join(" ")}${i}`;for(let e=1,a=t.length;e<a;e++){let a=t[e-1],l=t[e],{type:o,values:s}=l;if(!r||"A"!==o&&"a"!==o||(s=[s[0],s[1],s[2],`${s[3]}${s[4]}${s[5]}`,s[6]]),o=a.type===l.type&&"m"!==l.type.toLowerCase()&&r||("m"===a.type&&"l"===l.type||"M"===a.type&&"l"===l.type||"M"===a.type&&"L"===l.type)&&r?" ":l.type,r){let t="",e=!1;for(let a=0,r=s.length;a<r;a++){let r=s[a],n=r.toString(),i=n.includes(".")&&Math.abs(r)<1;i&&e&&(n=n.replace(/^0\./,".")),!(a>0)||e&&i||(t+=" "),t+=n,e=i}n+=`${o}${t}`}else n+=`${o} ${s.join(" ")}${i}`}return r&&(n=n.replace(/ 0\./g," .").replace(/ -/g,"-").replace(/-0\./g,"-.").replace(/Z/g,"z")),n}function q(t,e,a,{toRelative:r=!0,toShorthands:n=!0,decimals:i=3,addDimensions:l=!1,optimize:o=!0,getPDF:s=!0,minifyD:h=!0}={}){e=Math.ceil(e),a=Math.ceil(a);let y=[],c=t.length;for(let e=0;e<c;e++){let a=t[e],r=a[0].bb,n=j(a,true);y.push({pathData:a,bb:r,poly:n,includes:[]})}if(o)for(let t=0,e=y.length;t<e;t++){let{pathData:e,bb:a}=y[t];e=E(e),e=F(e),e=O(e),y[t].pathData=e}for(let t=0,e=y.length;t<e;t++){let a=y[t],{bb:r,poly:n}=a;for(let a=0;a<e;a++){let e=y[a];if(t===a)continue;let[i,l]=[e.bb,e.poly];if(!R(r,i))continue;let o=[{x:i.x+.5*i.width,y:i.y+.5*i.height},l[0],l[Math.floor(l.length/2)],l[l.length-1]],s=!1;for(let t=0;t<o.length;t++){if(k(o[t],n,r,!0)){s=!0;break}}s&&y[t].includes.push(a)}}for(let t=0,e=y.length;t<e;t++){let e=y[t],{includes:a}=e;a.forEach(e=>{let a=y[e].pathData;a.length&&(y[t].pathData.push(...a),y[e].pathData=[])})}y=y.filter(t=>t.pathData.length);let u=JSON.parse(JSON.stringify(y)).map(t=>t.pathData),x=JSON.parse(JSON.stringify(u)).flat(),p=l?`width="${e}" height="${a}" `:"",f=`<svg viewBox="0 0 ${e} ${a}" ${p}xmlns="http://www.w3.org/2000/svg">`,g=[];y.forEach(t=>{let{pathData:e}=t;try{(r||n||-1!=i)&&(e=C(e,{toRelative:r,toShorthands:n,decimals:i}));let t=V(e,h);g.push(t),f+=`<path d="${t}"/>`}catch{console.warn("catch pathdata could not be parsed",e)}}),f+="</svg>",(r||n||-1!=i)&&(x=C(x,{toRelative:r,toShorthands:n,decimals:i}));let d=V(x,h),w=`<svg viewBox="0 0 ${e} ${a}" ${p}xmlns="http://www.w3.org/2000/svg"><path d="${d}"/></svg>`,m="";if(s)try{m=function(t=[],{width:e=0,height:a=0}={}){let r="";t.forEach(t=>{r+=function(t,{height:e=0,decimals:a=3}={}){let r=["q","0 0 0 1 k"];return t.forEach(t=>{let{type:n,values:i}=t;if(i.length){let t=e;for(let e=1,r=i.length;e<r;e+=2)i[e-1]=i[e-1].toFixed(a),i[e]=+(t-i[e]).toFixed(a)}let l=i.length?`${i.join(" ")} ${n.toLowerCase()}`:"h";r.push(l)}),r.push("f","Q"),r.join("\n")}(t,{height:a})+"\n"});let n=(new TextEncoder).encode(r).length,i="%PDF-1.4\n",l=["<<\n/Type /Catalog\n/Pages 2 0 R\n>>","<<\n/Type /Pages\n/Kids [3 0 R]\n/Count 1\n>>",`<<\n/Type /Page\n/Parent 2 0 R\n/MediaBox [0 0 ${e} ${a}]\n/Contents 4 0 R\n>>`,`<<\n/Length ${n}\n>>\nstream\n${r}endstream`],o=[];for(let t=0;t<l.length;t++)o.push(i.length),i+=`${t+1} 0 obj\n${l[t]}\nendobj\n`;let s=(new TextEncoder).encode(i).length;i+=`xref\n0 ${l.length+1}\n`,i+="0000000000 65535 f \n";for(let t of o)i+=`${String(t).padStart(10,"0")} 00000 n \n`;return i+=`trailer\n<<\n/Size ${l.length+1}\n/Root 1 0 R\n>>\n`,i+=`startxref\n${s}\n%%EOF`,i}(u,{width:e,height:a})}catch{console.warn("pdf generation failed")}return{width:e,height:a,commands:x.length,svg:w,d:d,svgSplit:f,dArr:g,pathData:x,pathDataArr:u,pdf:m}}async function U(t=""){if(!t)return!1;let e=t.split("/").filter(Boolean),a="."===e[0];if(a&&(t=t.slice(1)),1===e.length||a){t=`${function(){try{let t=(new Error).stack.split("\n"),e=t[1]||t[2];return e?e.match(/(https?:\/\/[^\s]+)/)[1].split("/").slice(0,-1).join("/"):null}catch(t){return console.warn("Could not retrieve script path",t),null}}()}/${t}`}let r=!1;try{r=!!(await fetch(t,{method:"HEAD"})).ok&&t}catch{console.warn("file does not exist")}return r}function X(t={}){Object.assign(this,t)}X.prototype.getPdf=function(){return URL.createObjectURL(new Blob([this.pdf],{type:"application/pdf"}))},X.prototype.getSVG=function(t=!1){return t?this.svgSplit:this.svg},X.prototype.getPathData=function(){return this.pathDataNorm},X.prototype.getPathDataNorm=function(){return this.pathDataNorm},X.prototype.getD=function(){return this.d};const I="./potrace-plus.workers.js";async function Y(t,{turnpolicy:e="majority",turdsize:a=1,optcurve:r=!0,alphamax:n=1,opttolerance:i=1,minSize:l=1e3,maxSize:o=2500,scale:s=1,brightness:h=1,contrast:y=1,invert:c=0,blur:u=0,crop:x=!0,optimize:p=!0,minifyD:f=!0,addDimensions:g=!0,toRelative:d=!0,toShorthands:w=!0,decimals:m=3,getPolygon:v=!0,getPDF:M=!0,useWorker:A=!1}={}){f=parseFloat(f);let $=await b(t,{minSize:l,maxSize:o,crop:x,scale:s,brightness:h,contrast:y,invert:c,blur:u}),{bmp:D,scaleAdjust:S,width:L,height:k,bb:j,w:R,h:P}=$;(R+P)/2>1e3&&(A=!0);let C=await U(I);C||console.warn("Worker JS file does not exist.\nYou can download it from the github repo:\nhttps://raw.githubusercontent.com/herrstrietzel/potrace-plus/refs/heads/main/dist/potrace-plus.workers.js");let B={turnpolicy:e,turdsize:a,optcurve:r,alphamax:n,opttolerance:i,scaleAdjust:S,minSize:l,maxSize:o,width:L,height:k,w:R,h:P,bb:j,addDimensions:g,toRelative:d,toShorthands:w,optimize:p,minifyD:f,decimals:m,getPolygon:v,getPDF:M},F="pathlist",E=(A=!(A&&"undefined"==typeof Worker||!C)&&A)?await Z(F,{bmp:D,options:B}):z(D,B),{pathList:T,polygons:O}=E,V={};F="svgData";let q={pathList:T,polygons:O,scale:s=1/S,scaleAdjust:S,...B};return V=A?await Z(F,q):H(q),new X(V)}function H({pathList:t=[],width:e=0,height:a=0,w:r=0,h:n=0,bb:i={x:0,y:0,width:0,height:0},scale:l=1,scaleAdjust:o=1,polygons:s=[],getPolygon:h=!1,addDimensions:y=!0,toRelative:c=!0,toShorthands:u=!0,optimize:x=!0,minifyD:p=0,decimals:f=3,getPDF:g=!0}={}){let d=function(t=[],e=1){t.sort((t,e)=>t.minX-e.minX||t.minY-e.minY);let a=t.length,r=[];for(let n=0;n<a;n++){let a,i=[],l=t[n],{curve:o,minX:s,maxX:h,minY:y,maxY:c,sign:u}=l,x={x:s,y:y,width:h-s,height:c-y},p=o.n;i.push({type:"M",values:[o.c[3*(p-1)+2].x*e,o.c[3*(p-1)+2].y*e],bb:x,cw:"+"===u});for(let t=0;t<p;t++){let r=o.tag[t];"curve"===r?a=[{type:"C",values:[o.c[3*t].x*e,o.c[3*t].y*e,o.c[3*t+1].x*e,o.c[3*t+1].y*e,o.c[3*t+2].x*e,o.c[3*t+2].y*e]}]:"corner"===r&&(a=[{type:"L",values:[o.c[3*t+1].x*e,o.c[3*t+1].y*e]},{type:"L",values:[o.c[3*t+2].x*e,o.c[3*t+2].y*e]}]),i.push(...a)}i.push({type:"Z",values:[]}),r.push(i)}return r}(t,l);if(!d.flat().length)throw new Error("Couldn't trace image");let w=q(d,e,a,{addDimensions:y,toRelative:c,toShorthands:u,optimize:x,minifyD:p,decimals:f,getPDF:g});return w.scaleAdjust=o,w.bb=i,w.w=r,w.h=n,w.polygons=h?s:[],w}function Z(t="pathlist",e={}){return new Promise((a,r)=>{let n=new Worker(new URL(I,import.meta.url),{type:"module"});n.postMessage({type:t,data:e}),n.onmessage=t=>{let{result:e,error:i}=t.data;n.terminate(),i?r(new Error(i)):a(e)},n.onerror=t=>{n.terminate(),r(t)}})}"undefined"!=typeof window&&(window.pathDataToD=V,window.PotracePlus=Y,window.imgDataFromSrc=M,window.potraceGetPathList=z,window.svg2Canvas=A);export{v as Bitmap,m as PI,X as PotraceObj,Y as PotracePlus,t as abs,e as acos,a as asin,r as atan,n as atan2,i as ceil,l as cos,o as exp,s as floor,H as getSVGData,y as hypot,M as imgDataFromSrc,h as log,c as max,u as min,z as potraceGetPathList,Z as potrace_worker,x as pow,p as random,f as round,g as sin,d as sqrt,A as svg2Canvas,w as tan};
