!function(t){"use strict";const{abs:e,acos:a,asin:r,atan:n,atan2:i,ceil:y,cos:o,exp:l,floor:s,log:c,hypot:x,max:u,min:f,pow:p,random:h,round:d,sin:v,sqrt:m,tan:w,PI:g}=Math;function A(t,e){this.w=t,this.h=e,this.size=t*e,this.arraybuffer=new ArrayBuffer(this.size),this.data=new Int8Array(this.arraybuffer)}async function b(t,{minSize:e=1e3,maxSize:a=5e3,filter:r="",scale:n=1,canvas:i=null}={}){let o,l=function(t){return t instanceof HTMLImageElement?"img":t instanceof SVGElement?"svg":t instanceof HTMLCanvasElement?"canvas":t instanceof File?"file":t instanceof ArrayBuffer?"buffer":"string"==typeof t?/^(file:|https?:\/\/|\/|\.\/|\.\.\/)/.test(t)?"url":"string":"unknown"}(t),s={minSize:e,maxSize:a,filter:r,scale:n,canvas:i};if("img"===l){let e=t.src;o=await async function(t="",{minSize:e=1e3,maxSize:a=5e3,filter:r="",scale:n=1,canvas:i=null}={}){let o,l,s,c,x,u,p=1,h=0;e*=n,a*=n,i||(i=new OffscreenCanvas(300,150));let d=i.getContext("2d"),v=await fetch(t);if(v.ok){let r=await v.blob(),{type:n}=r;"image/svg+xml"!==n?(o=await createImageBitmap(r),[l,s]=[o.width,o.height],i.width=l,i.height=s,d.drawImage(o,0,0),c=d.getImageData(0,0,l,s)):(o=new Image,o.src=t,o.crossOrigin="anonymous",await o.decode(),l=o.naturalWidth,s=o.naturalHeight,h=f(l,s),p=h<e||h>a?e/h:1,x=l*p,u=s*p,i.width=x,i.height=u,d=i.getContext("2d"),d.fillStyle="white",d.fillRect(0,0,x,u),d.drawImage(o,0,0,x,u),c=d.getImageData(0,0,x,u))}let{width:m,height:w}=c;return m=y(m/p),w=y(w/p),{imgData:c,scaleAdjust:p,width:m,height:w}}(e,s)}let{imgData:c,scaleAdjust:x,width:u,height:p}=o,h=function(t){let e,{data:a,width:r,height:n}=t,i=new A(r,n),y=a.length;for(let t=0,r=0;t<y;t+=4,r++)e=a[t],i.data[r]=e<128?1:0;return i}(c);return{bmp:h,scaleAdjust:x,width:u,height:p}}function z(){this.area=0,this.len=0,this.curve={},this.pt=[],this.minX=1e5,this.minY=1e5,this.maxX=-1,this.maxY=-1}function S(t){this.n=t,this.tag=new Array(t),this.c=new Array(3*t),this.alphaCurve=0,this.vertex=new Array(t),this.alpha=new Array(t),this.alpha0=new Array(t),this.beta=new Array(t)}function k(t,e=-1){let a=!("auto"!=e||!t[0].hasOwnProperty("decimals"));for(let r=0,n=t.length;r<n;r++){let n=t[r];(e>-1||a)&&(e=a?n.decimals:e,t[r].values=n.values.map(t=>t?+t.toFixed(e):t))}return t}function j(t,{toShorthands:a=!0,toRelative:r=!0,decimals:n=3}={}){return n>-1&&n<2&&(t=k(t,n)),a&&(t=function(t,a=-1,r=!0){let n;if(r){let e=t.map(t=>t.type).join("");n=/[astvqmhlc]/g.test(e)}t=r&&n?function(t,e=-1){return D(t,!1,e)}(t,a):t;let i={type:"M",values:t[0].values};t[0].decimals&&(i.decimals=t[0].decimals);let y,o=[i],l={x:t[0].values[0],y:t[0].values[1]},s=.01;for(let r=1,n=t.length;r<n;r++){let n=t[r],{type:c,values:x}=n,u=x.slice(-2),f=t[r-1],p=f.type;y={x:u[0],y:u[1]};let h,d,v,m,w={x:x[0],y:x[1]},g=e(y.x-l.x),A=e(y.y-l.y),b=(g+A)/2*s;switch(c){case"L":i=0===A||A<b&&g>b?{type:"H",values:[x[0]]}:0===g||A>b&&g<b?{type:"V",values:[x[1]]}:n;break;case"Q":if("Q"!==p){l={x:u[0],y:u[1]},o.push(n);continue}let t={x:f.values[0],y:f.values[1]};m={x:2*l.x-t.x,y:2*l.y-t.y},h=e(w.x-m.x),d=e(w.y-m.y),v=(h+d)/2,i=v<b?{type:"T",values:[y.x,y.y]}:n;break;case"C":let a={x:x[2],y:x[3]};if("C"!==p){o.push(n),l={x:u[0],y:u[1]};continue}let r={x:f.values[2],y:f.values[3]};m={x:2*l.x-r.x,y:2*l.y-r.y},h=e(w.x-m.x),d=e(w.y-m.y),v=(h+d)/2,i=v<b?{type:"S",values:[a.x,a.y,y.x,y.y]}:n;break;default:i={type:c,values:x}}(n.decimals||0===n.decimals)&&(i.decimals=n.decimals),a>-1&&(i.values=i.values.map(t=>+t.toFixed(a))),l={x:u[0],y:u[1]},o.push(i)}return o}(t)),r&&(t=function(t,e=-1){return D(t,!0,e)}(t)),n>-1&&(t=k(t,n)),t}function D(t,e=!1,a=-1){a>=0&&(t[0].values=t[0].values.map(t=>+t.toFixed(a)));let r=t[0].values,n=r[0],i=r[1],y=n,o=i;for(let r=1,l=t.length;r<l;r++){let l=t[r],{type:s,values:c}=l,x=e?s.toLowerCase():s.toUpperCase();if(s!==x)switch(s=x,l.type=s,s){case"a":case"A":c[5]=e?c[5]-n:c[5]+n,c[6]=e?c[6]-i:c[6]+i;break;case"v":case"V":c[0]=e?c[0]-i:c[0]+i;break;case"h":case"H":c[0]=e?c[0]-n:c[0]+n;break;case"m":case"M":e?(c[0]-=n,c[1]-=i):(c[0]+=n,c[1]+=i),y=e?c[0]+n:c[0],o=e?c[1]+i:c[1];break;default:if(c.length)for(let t=0;t<c.length;t++)c[t]=e?c[t]-(t%2?i:n):c[t]+(t%2?i:n)}let u=c.length;switch(s){case"z":case"Z":n=y,i=o;break;case"h":case"H":n=e?n+c[0]:c[0];break;case"v":case"V":i=e?i+c[0]:c[0];break;case"m":case"M":y=c[u-2]+(e?n:0),o=c[u-1]+(e?i:0);default:n=c[u-2]+(e?n:0),i=c[u-1]+(e?i:0)}a>=0&&(l.values=l.values.map(t=>+t.toFixed(a)))}return t}function $(t,{turnpolicy:a="majority",turdsize:r=1,optcurve:n=!0,alphamax:i=1,opttolerance:y=1}={}){let o=[];return function(){let e,n=t.copy(),i={x:0,y:0};function y(t){let e=n.w*t.y+t.x;for(;e<n.size&&1!==n.data[e];)e++;return e<n.size&&n.index(e)}function l(t,e){for(let a=2;a<5;a++){let r=0;for(let i=1-a;i<=a-1;i++)r+=n.at(t+i,e+a-1)?1:-1,r+=n.at(t+a-1,e+i-1)?1:-1,r+=n.at(t+i-1,e-a)?1:-1,r+=n.at(t-a,e+i)?1:-1;if(r>0)return 1;if(r<0)return 0}return 0}function s(e){let r,i=new z,y=e.x,o=e.y,s=0,c=1;for(i.sign=t.at(e.x,e.y)?"+":"-";i.pt.push({x:y,y:o}),y>i.maxX&&(i.maxX=y),y<i.minX&&(i.minX=y),o>i.maxY&&(i.maxY=o),o<i.minY&&(i.minY=o),i.len++,y+=s,o+=c,i.area-=y*c,y!==e.x||o!==e.y;){let t=n.at(y+(s+c-1)/2,o+(c-s-1)/2),e=n.at(y+(s-c-1)/2,o+(c+s-1)/2);e&&!t?"right"===a||"black"===a&&"+"===i.sign||"white"===a&&"-"===i.sign||"majority"===a&&l(y,o)||"minority"===a&&!l(y,o)?(r=s,s=-c,c=r):(r=s,s=c,c=-r):e?(r=s,s=-c,c=r):t||(r=s,s=c,c=-r)}return i}function c(t){let e,a,r=t.pt[0].y,i=t.len;for(let y=1;y<i;y++){let i=t.pt[y].x,o=t.pt[y].y;if(o!==r){a=r<o?r:o,e=t.maxX;for(let t=i;t<e;t++)n.flip(t,a);r=o}}}for(;i=y(i);)e=s(i),c(e),e.area>r&&o.push(e)}(),function(){function t(){this.data=[0,0,0,0,0,0,0,0,0]}function a(t,e,a,r,n){this.x=t,this.y=e,this.xy=a,this.x2=r,this.y2=n}function r(t,e){return t>=e?t%e:t>=0?t:e-1-(-1-t)%e}function l(t,e){return t.x*e.y-t.y*e.x}function c(t,e,a){return t<=a?t<=e&&e<a:t<=e||e<a}function x(t){return t>0?1:t<0?-1:0}function u(t,e){let a=new Array(3),r=0;a[0]=e.x,a[1]=e.y,a[2]=1;for(let e=0;e<3;e++)for(let n=0;n<3;n++)r+=a[e]*t.at(e,n)*a[n];return r}function p(t,e,a){return{x:e.x+t*(a.x-e.x),y:e.y+t*(a.y-e.y)}}function h(t,e){let a=function(t,e){return{x:-x(e.y-t.y),y:x(e.x-t.x)}}(t,e);return a.y*(e.x-t.x)-a.x*(e.y-t.y)}function d(t="",e={},a={},r={},n={}){let i,y,o,l;return"cprod"===t||"iprod1"===t?(i=a.x-e.x,o=a.y-e.y,y=n.x-r.x,l=n.y-r.y):(i=a.x-e.x,o=a.y-e.y,y=r.x-e.x,l=r.y-e.y),"cprod"===t||"dpara"===t?i*l-y*o:i*y+o*l}function v(t,e){return m((t.x-e.x)**2+(t.y-e.y)**2)}function w(t,e,a,r,n){let i=1-t;return{x:i*i*i*e.x+i*i*t*3*a.x+t*t*i*3*r.x+t*t*t*n.x,y:i*i*i*e.y+i*i*t*3*a.y+t*t*i*3*r.y+t*t*t*n.y}}function g(t,e,a,r,n,i){let y=d("cprod",t,e,n,i),o=d("cprod",e,a,n,i),l=y-2*o+d("cprod",a,r,n,i),s=-2*y+2*o,c=s*s-4*l*y;if(0===l||c<0)return-1;let x=m(c),u=(-s+x)/(2*l),f=(-s-x)/(2*l);return u>=0&&u<=1?u:f>=0&&f<=1?f:-1}function A(t){t.x0=t.pt[0].x,t.y0=t.pt[0].y,t.sums=[];let e=t.sums;e.push(new a(0,0,0,0,0));for(let r=0;r<t.len;r++){let n=t.pt[r].x-t.x0,i=t.pt[r].y-t.y0;e.push(new a(e[r].x+n,e[r].y+i,e[r].xy+n*i,e[r].x2+n*n,e[r].y2+i*i))}}function b(t){let a,n=t.len,i=t.pt,y=new Array(n),o=new Array(n),u=new Array(4);t.lon=new Array(n);let p,h,d,v,m,w,g,A,b=[{x:0,y:0},{x:0,y:0}],z={x:0,y:0},S={x:0,y:0},k={x:0,y:0},j=0;for(h=n-1;h>=0;h--)i[h].x!=i[j].x&&i[h].y!=i[j].y&&(j=h+1),o[h]=j;for(h=n-1;h>=0;h--){for(u[0]=u[1]=u[2]=u[3]=0,a=(3+3*(i[r(h+1,n)].x-i[h].x)+(i[r(h+1,n)].y-i[h].y))/2,u[a]++,b[0].x=0,b[0].y=0,b[1].x=0,b[1].y=0,j=o[h],v=h;;){if(p=0,a=(3+3*x(i[j].x-i[v].x)+x(i[j].y-i[v].y))/2,u[a]++,u[0]&&u[1]&&u[2]&&u[3]){y[h]=v,p=1;break}if(z.x=i[j].x-i[h].x,z.y=i[j].y-i[h].y,l(b[0],z)<0||l(b[1],z)>0)break;if(e(z.x)<=1&&e(z.y)<=1||(S.x=z.x+(z.y>=0&&(z.y>0||z.x<0)?1:-1),S.y=z.y+(z.x<=0&&(z.x<0||z.y<0)?1:-1),l(b[0],S)>=0&&(b[0].x=S.x,b[0].y=S.y),S.x=z.x+(z.y<=0&&(z.y<0||z.x<0)?1:-1),S.y=z.y+(z.x>=0&&(z.x>0||z.y<0)?1:-1),l(b[1],S)<=0&&(b[1].x=S.x,b[1].y=S.y)),v=j,j=o[v],!c(j,h,v))break}0===p&&(k.x=x(i[j].x-i[v].x),k.y=x(i[j].y-i[v].y),z.x=i[v].x-i[h].x,z.y=i[v].y-i[h].y,m=l(b[0],z),w=l(b[0],k),g=l(b[1],z),A=l(b[1],k),d=1e7,w<0&&(d=s(m/-w)),A>0&&(d=f(d,s(-g/A))),y[h]=r(v+d,n))}for(d=y[n-1],t.lon[n-1]=d,h=n-2;h>=0;h--)c(h+1,y[h],d)&&(d=y[h]),t.lon[h]=d;for(h=n-1;c(r(h+1,n),d,t.lon[h]);h--)t.lon[h]=d}function z(t){function e(t,e,a){let r,n,i,y,o,l,s,c,x,u,f,p,h,d,v=t.len,w=t.pt,g=t.sums,A=0;return a>=v&&(a-=v,A=1),0===A?(r=g[a+1].x-g[e].x,n=g[a+1].y-g[e].y,y=g[a+1].x2-g[e].x2,i=g[a+1].xy-g[e].xy,o=g[a+1].y2-g[e].y2,l=a+1-e):(r=g[a+1].x-g[e].x+g[v].x,n=g[a+1].y-g[e].y+g[v].y,y=g[a+1].x2-g[e].x2+g[v].x2,i=g[a+1].xy-g[e].xy+g[v].xy,o=g[a+1].y2-g[e].y2+g[v].y2,l=a+1-e+v),f=(w[e].x+w[a].x)/2-w[0].x,p=(w[e].y+w[a].y)/2-w[0].y,d=w[a].x-w[e].x,h=-(w[a].y-w[e].y),s=(y-2*r*f)/l+f*f,c=(i-r*p-n*f)/l+f*p,x=(o-2*n*p)/l+p*p,u=h*h*s+2*h*d*c+d*d*x,m(u)}let a,n,i,y,o,l,s,c=t.len,x=new Array(c+1),u=new Array(c+1),f=new Array(c),p=new Array(c+1),h=new Array(c+1),d=new Array(c+1);for(a=0;a<c;a++)s=r(t.lon[r(a-1,c)]-1,c),s==a&&(s=r(a+1,c)),f[a]=s<a?c:s;for(n=1,a=0;a<c;a++)for(;n<=f[a];)p[n]=a,n++;for(a=0,n=0;a<c;n++)h[n]=a,a=f[a];for(h[n]=c,i=n,a=c,n=i;n>0;n--)d[n]=a,a=p[a];for(d[0]=0,x[0]=0,n=1;n<=i;n++)for(a=d[n];a<=h[n];a++){for(l=-1,y=h[n-1];y>=p[a];y--)o=e(t,y,a)+x[y],(l<0||o<l)&&(u[a]=y,l=o);x[a]=l}for(t.m=i,t.po=new Array(i),a=c,n=i-1;a>0;n--)a=u[a],t.po[n]=a}function k(a){function n(t,a,r,n,i){let y,o,l,s,c,x,u,f,p,h,d,v=t.len,w=t.sums,g=0;for(;r>=v;)r-=v,g+=1;for(;a>=v;)a-=v,g-=1;for(;r<0;)r+=v,g-=1;for(;a<0;)a+=v,g+=1;y=w[r+1].x-w[a].x+g*w[v].x,o=w[r+1].y-w[a].y+g*w[v].y,l=w[r+1].x2-w[a].x2+g*w[v].x2,s=w[r+1].xy-w[a].xy+g*w[v].xy,c=w[r+1].y2-w[a].y2+g*w[v].y2,x=r+1-a+g*v,n.x=y/x,n.y=o/x,u=(l-y*y/x)/x,f=(s-y*o/x)/x,p=(c-o*o/x)/x,h=(u+p+m((u-p)*(u-p)+4*f*f))/2,u-=h,p-=h,e(u)>=e(p)?(d=m(u*u+f*f),0!==d&&(i.x=-f/d,i.y=u/d)):(d=m(p*p+f*f),0!==d&&(i.x=-p/d,i.y=f/d)),0===d&&(i.x=i.y=0)}let i,y,o,l,s,c,x,f,p,h,d,v,w,g,A,b=a.m,z=a.po,k=a.len,j=a.pt,D=a.x0,$=a.y0,C=new Array(b),I=new Array(b),M=new Array(b),L=new Array(3),O={x:0,y:0};for(a.curve=new S(b),y=0;y<b;y++)o=z[r(y+1,b)],o=r(o-z[y],k)+z[y],C[y]={x:0,y:0},I[y]={x:0,y:0},n(a,z[y],o,C[y],I[y]);for(y=0;y<b;y++)if(M[y]=new t,i=I[y].x*I[y].x+I[y].y*I[y].y,0===i)for(o=0;o<3;o++)for(l=0;l<3;l++)M[y].data[3*o+l]=0;else for(L[0]=I[y].y,L[1]=-I[y].x,L[2]=-L[1]*C[y].y-L[0]*C[y].x,s=0;s<3;s++)for(l=0;l<3;l++)M[y].data[3*s+l]=L[s]*L[l]/i;for(y=0;y<b;y++){for(c=new t,x={x:0,y:0},O.x=j[z[y]].x-D,O.y=j[z[y]].y-$,o=r(y-1,b),s=0;s<3;s++)for(l=0;l<3;l++)c.data[3*s+l]=M[o].at(s,l)+M[y].at(s,l);for(;;){if(h=c.at(0,0)*c.at(1,1)-c.at(0,1)*c.at(1,0),0!==h){x.x=(-c.at(0,2)*c.at(1,1)+c.at(1,2)*c.at(0,1))/h,x.y=(c.at(0,2)*c.at(1,0)-c.at(1,2)*c.at(0,0))/h;break}for(c.at(0,0)>c.at(1,1)?(L[0]=-c.at(0,1),L[1]=c.at(0,0)):c.at(1,1)?(L[0]=-c.at(1,1),L[1]=c.at(1,0)):(L[0]=1,L[1]=0),i=L[0]*L[0]+L[1]*L[1],L[2]=-L[1]*O.y-L[0]*O.x,s=0;s<3;s++)for(l=0;l<3;l++)c.data[3*s+l]+=L[s]*L[l]/i}if(f=e(x.x-O.x),p=e(x.y-O.y),f<=.5&&p<=.5)a.curve.vertex[y]={x:x.x+D,y:x.y+$};else{if(d=u(c,O),w=O.x,g=O.y,0!==c.at(0,0))for(A=0;A<2;A++)x.y=O.y-.5+A,x.x=-(c.at(0,1)*x.y+c.at(0,2))/c.at(0,0),f=e(x.x-O.x),v=u(c,x),f<=.5&&v<d&&(d=v,w=x.x,g=x.y);if(0!==c.at(1,1))for(A=0;A<2;A++)x.x=O.x-.5+A,x.y=-(c.at(1,0)*x.x+c.at(1,2))/c.at(1,1),p=e(x.y-O.y),v=u(c,x),p<=.5&&v<d&&(d=v,w=x.x,g=x.y);for(s=0;s<2;s++)for(l=0;l<2;l++)x.x=O.x-.5+s,x.y=O.y-.5+l,v=u(c,x),v<d&&(d=v,w=x.x,g=x.y);a.curve.vertex[y]={x:w+D,y:g+$}}}}function j(t){let e,a,r,n=t.curve,i=n.n,y=n.vertex;for(e=0,a=i-1;e<a;e++,a--)r=y[e],y[e]=y[a],y[a]=r}function D(t){let a,n,y,o,l,s,c,x,u,f=t.curve.n,v=t.curve;for(a=0;a<f;a++)n=r(a+1,f),y=r(a+2,f),u=p(.5,v.vertex[y],v.vertex[n]),l=h(v.vertex[a],v.vertex[y]),0!==l?(o=d("dpara",v.vertex[a],v.vertex[n],v.vertex[y])/l,o=e(o),s=o>1?1-1/o:0,s/=.75):s=4/3,v.alpha0[n]=s,s>=i?(v.tag[n]="corner",v.c[3*n+1]=v.vertex[n],v.c[3*n+2]=u):(s<.55?s=.55:s>1&&(s=1),c=p(.5+.5*s,v.vertex[a],v.vertex[n]),x=p(.5+.5*s,v.vertex[y],v.vertex[n]),v.tag[n]="curve",v.c[3*n+0]=c,v.c[3*n+1]=x,v.c[3*n+2]=u),v.alpha[n]=s,v.beta[n]=.5;v.alphacurve=1}function $(t){function a(){this.pen=0,this.c=[{x:0,y:0},{x:0,y:0}],this.t=0,this.s=0,this.alpha=0}function n(t,a,n,i,y,o,l){let s,c,u,f,h,A,b,z,S,k,j,D,$,C,I,M,L,O,P,X,F,H,R,Y=t.curve.n,V=t.curve,q=V.vertex;if(a==n)return 1;if(s=a,h=r(a+1,Y),c=r(s+1,Y),f=o[c],0===f)return 1;for(z=v(q[a],q[h]),s=c;s!=n;s=c){if(c=r(s+1,Y),u=r(s+2,Y),o[c]!=f)return 1;if(x(d("cprod",q[a],q[h],q[c],q[u]))!=f)return 1;if(d("iprod1",q[a],q[h],q[c],q[u])<z*v(q[c],q[u])*-.999847695156)return 1}if(j=V.c[3*r(a,Y)+2],D=q[r(a+1,Y)],$=q[r(n,Y)],C=V.c[3*r(n,Y)+2],A=l[n]-l[a],A-=d("dpara",q[0],V.c[3*a+2],V.c[3*n+2])/2,a>=n&&(A+=l[Y]),O=d("dpara",j,D,$),P=d("dpara",j,D,C),X=d("dpara",j,$,C),F=O+X-P,P==O)return 1;if(R=X/(X-F),H=P/(P-O),M=P*R/2,0===M)return 1;for(L=A/M,b=2-m(4-L/.3),i.c[0]=p(R*b,j,D),i.c[1]=p(H*b,C,$),i.alpha=b,i.t=R,i.s=H,D={x:i.c[0].x,y:i.c[0].y},$={x:i.c[1].x,y:i.c[1].y},i.pen=0,s=r(a+1,Y);s!=n;s=c){if(c=r(s+1,Y),R=g(j,D,$,C,q[s],q[c]),R<-.5)return 1;if(I=w(R,j,D,$,C),z=v(q[s],q[c]),0===z)return 1;if(S=d("dpara",q[s],q[c],I)/z,e(S)>y)return 1;if(d("iprod",q[s],q[c],I)<0||d("iprod",q[c],q[s],I)<0)return 1;i.pen+=S*S}for(s=a;s!=n;s=c){if(c=r(s+1,Y),R=g(j,D,$,C,V.c[3*s+2],V.c[3*c+2]),R<-.5)return 1;if(I=w(R,j,D,$,C),z=v(V.c[3*s+2],V.c[3*c+2]),0===z)return 1;if(S=d("dpara",V.c[3*s+2],V.c[3*c+2],I)/z,k=d("dpara",V.c[3*s+2],V.c[3*c+2],q[c])/z,k*=.75*V.alpha[c],k<0&&(S=-S,k=-k),S<k-y)return 1;S<k&&(i.pen+=(S-k)*(S-k))}return 0}let i,o,l,s,c,u,f,h,A,b,z,k=t.curve,j=k.n,D=k.vertex,$=new Array(j+1),C=new Array(j+1),I=new Array(j+1),M=new Array(j+1),L=new a,O=new Array(j),P=new Array(j+1);for(o=0;o<j;o++)"curve"==k.tag[o]?O[o]=x(d("dpara",D[r(o-1,j)],D[o],D[r(o+1,j)])):O[o]=0;for(f=0,P[0]=0,c=k.vertex[0],o=0;o<j;o++)u=r(o+1,j),"curve"==k.tag[u]&&(h=k.alpha[u],f+=.3*h*(4-h)*d("dpara",k.c[3*o+2],D[u],k.c[3*u+2])/2,f+=d("dpara",c,k.c[3*o+2],k.c[3*u+2])/2),P[o+1]=f;for($[0]=-1,C[0]=0,I[0]=0,l=1;l<=j;l++)for($[l]=l-1,C[l]=C[l-1],I[l]=I[l-1]+1,o=l-2;o>=0&&(s=n(t,o,r(l,j),L,y,O,P),!s);o--)(I[l]>I[o]+1||I[l]==I[o]+1&&C[l]>C[o]+L.pen)&&($[l]=o,C[l]=C[o]+L.pen,I[l]=I[o]+1,M[l]=L,L=new a);for(i=I[j],A=new S(i),b=new Array(i),z=new Array(i),l=j,o=i-1;o>=0;o--)$[l]==l-1?(A.tag[o]=k.tag[r(l,j)],A.c[3*o+0]=k.c[3*r(l,j)+0],A.c[3*o+1]=k.c[3*r(l,j)+1],A.c[3*o+2]=k.c[3*r(l,j)+2],A.vertex[o]=k.vertex[r(l,j)],A.alpha[o]=k.alpha[r(l,j)],A.alpha0[o]=k.alpha0[r(l,j)],A.beta[o]=k.beta[r(l,j)],b[o]=z[o]=1):(A.tag[o]="curve",A.c[3*o+0]=M[l].c[0],A.c[3*o+1]=M[l].c[1],A.c[3*o+2]=k.c[3*r(l,j)+2],A.vertex[o]=p(M[l].s,k.c[3*r(l,j)+2],D[r(l,j)]),A.alpha[o]=M[l].alpha,A.alpha0[o]=M[l].alpha,b[o]=M[l].s,z[o]=M[l].t),l=$[l];for(o=0;o<i;o++)u=r(o+1,i),A.beta[o]=b[o]/(b[o]+z[u]);A.alphacurve=1,t.curve=A}t.prototype.at=function(t,e){return this.data[3*t+e]};for(let t=0;t<o.length;t++){let e=o[t];A(e),b(e),z(e),k(e),"-"===e.sign&&j(e),D(e),n&&$(e)}}(),o}function C(t={}){Object.assign(this,t)}async function I(t,{turnpolicy:e="majority",turdsize:a=1,optcurve:r=!0,alphamax:n=1,opttolerance:i=1,minSize:o=1e3,maxSize:l=5e3,scale:s=1,addDimensions:c=!0,toRelative:x=!0,toShorthands:u=!0,decimals:f=3}={}){let p=await b(t,{minSize:o,maxSize:l,scale:s}),{bmp:h,scaleAdjust:d,width:v,height:m}=p;console.log(o,l,p);let w=$(h,{turnpolicy:e,turdsize:a,optcurve:r,alphamax:n,opttolerance:i,scaleAdjust:d,minSize:o,maxSize:l});s=1/d,console.log(x,u,f);let g=function(t=[],e=1){let a=t.length,r=[];for(let n=0;n<a;n++){let a,i=t[n].curve,y=i.n;r.push({type:"M",values:[i.c[3*(y-1)+2].x*e,i.c[3*(y-1)+2].y*e]});for(let t=0;t<y;t++){let n=i.tag[t];"curve"===n?a=[{type:"C",values:[i.c[3*t].x*e,i.c[3*t].y*e,i.c[3*t+1].x*e,i.c[3*t+1].y*e,i.c[3*t+2].x*e,i.c[3*t+2].y*e]}]:"corner"===n&&(a=[{type:"L",values:[i.c[3*t+1].x*e,i.c[3*t+1].y*e]},{type:"L",values:[i.c[3*t+2].x*e,i.c[3*t+2].y*e]}]),r.push(...a)}r.push({type:"Z",values:[]})}return r}(w,s),A=JSON.parse(JSON.stringify(g)),z=function(t,e,a,{toRelative:r=!0,toShorthands:n=!0,decimals:i=3,addDimensions:o=!1}={}){e=y(e),a=y(a),(r||n||-1!=i)&&(t=j(t,{toRelative:r,toShorthands:n,decimals:i}));let l=function(t,e=-1,a=!1){"l"===t[1].type&&a&&(t[0].type="m");let r=`${t[0].type}${t[0].values.join(" ")}`;for(let n=1;n<t.length;n++){let i=t[n-1],y=t[n],o=i.type===y.type&&a||("m"===i.type&&"l"===y.type||"M"===i.type&&"l"===y.type||"M"===i.type&&"L"===y.type)&&a?" ":y.type;y.values.length&&e>-1&&(y.values=y.values.map(t=>+t.toFixed(e))),r+=`${o}${y.values.join(" ")}`}return a&&(r=r.replaceAll(" 0."," .").replaceAll(" -","-").replaceAll("-0.","-.").replace(/\s+([mlcsqtahvz])/gi,"$1").replaceAll("Z","z")),r}(t,i);return{svg:`<svg viewBox="0 0 ${e} ${a}" ${o?`width="${e}" height="${a}" `:""}xmlns="http://www.w3.org/2000/svg"><path d="${l}"/></svg>`,d:l}}(g,v,m,{addDimensions:c,toRelative:x,toShorthands:u,decimals:f});return z.pathData=g,z.scaleAdjust=d,z.pathDataNorm=A,console.log("!!!data",z,g),new C(z)}A.prototype.at=function(t,e){return t>=0&&t<this.w&&e>=0&&e<this.h&&1===this.data[this.w*e+t]},A.prototype.index=function(t){let e={x:0,y:s(t/this.w)};return e.x=t-e.y*this.w,e},A.prototype.flip=function(t,e){this.at(t,e)?this.data[this.w*e+t]=0:this.data[this.w*e+t]=1},A.prototype.copy=function(){let t,e=new A(this.w,this.h);for(t=0;t<this.size;t++)e.data[t]=this.data[t];return e},C.prototype.getSVG=function(){return this.svg},C.prototype.getPathData=function(){return this.pathData},C.prototype.getD=function(){return this.d},"undefined"!=typeof window&&(window.Potrace=I),t.PI=g,t.Potrace=I,t.PotraceObj=C,t.abs=e,t.acos=a,t.asin=r,t.atan=n,t.atan2=i,t.ceil=y,t.cos=o,t.exp=l,t.floor=s,t.hypot=x,t.log=c,t.max=u,t.min=f,t.pow=p,t.random=h,t.round=d,t.sin=v,t.sqrt=m,t.tan=w}(this["potrace-plus"]=this["potrace-plus"]||{});
